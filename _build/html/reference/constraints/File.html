

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>File &mdash; Symfony2Docs v2.1.0 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs v2.1.0 2.1.0 documentation" href="../../index.html" />
    <link rel="up" title="Validation Constraints Reference" href="../constraints.html" />
    <link rel="next" title="Image" href="Image.html" />
    <link rel="prev" title="Country" href="Country.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Image.html" title="Image"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Country.html" title="Country"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Symfony2Docs v2.1.0 2.1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Reference Documents</a> &raquo;</li>
          <li><a href="../constraints.html" accesskey="U">Validation Constraints Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="file">
<h1>File<a class="headerlink" href="#file" title="Permalink to this headline">¶</a></h1>
<p>Validates that a value is a valid &#8220;file&#8221;, which can be one of the following:</p>
<ul class="simple">
<li>A string (or object with a <tt class="docutils literal"><span class="pre">__toString()</span></tt> method) path to an existing file;</li>
<li>A valid <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/File/File.html" title="Symfony\Component\HttpFoundation\File\File"><span class="pre">File</span></a></tt> object
(including objects of class <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/File/UploadedFile.html" title="Symfony\Component\HttpFoundation\File\UploadedFile"><span class="pre">UploadedFile</span></a></tt>).</li>
</ul>
<p>This constraint is commonly used in forms with the <a class="reference internal" href="../forms/types/file.html"><em>file</em></a>
form type.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If the file you&#8217;re validating is an image, try the <a class="reference internal" href="Image.html"><em>Image</em></a>
constraint.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Applies to</td>
<td><a class="reference internal" href="../../book/validation.html#validation-property-target"><em>property or method</em></a></td>
</tr>
<tr class="row-even"><td>Options</td>
<td><ul class="first last simple">
<li><a class="reference internal" href="#maxsize">maxSize</a></li>
<li><a class="reference internal" href="#mimetypes">mimeTypes</a></li>
<li><a class="reference internal" href="#maxsizemessage">maxSizeMessage</a></li>
<li><a class="reference internal" href="#mimetypesmessage">mimeTypesMessage</a></li>
<li><a class="reference internal" href="#notfoundmessage">notFoundMessage</a></li>
<li><a class="reference internal" href="#notreadablemessage">notReadableMessage</a></li>
<li><a class="reference internal" href="#uploadinisizeerrormessage">uploadIniSizeErrorMessage</a></li>
<li><a class="reference internal" href="#uploadformsizeerrormessage">uploadFormSizeErrorMessage</a></li>
<li><a class="reference internal" href="#uploaderrormessage">uploadErrorMessage</a></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Class</td>
<td><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Validator/Constraints/File.html" title="Symfony\Component\Validator\Constraints\File"><span class="pre">File</span></a></tt></td>
</tr>
<tr class="row-even"><td>Validator</td>
<td><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Validator/Constraints/FileValidator.html" title="Symfony\Component\Validator\Constraints\FileValidator"><span class="pre">FileValidator</span></a></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>This constraint is most commonly used on a property that will be rendered
in a form as a <a class="reference internal" href="../forms/types/file.html"><em>file</em></a> form type. For example,
suppose you&#8217;re creating an author form where you can upload a &#8220;bio&#8221; PDF for
the author. In your form, the <tt class="docutils literal"><span class="pre">bioFile</span></tt> property would be a <tt class="docutils literal"><span class="pre">file</span></tt> type.
The <tt class="docutils literal"><span class="pre">Author</span></tt> class might look as follows:</p>
<div class="highlight-python"><pre>// src/Acme/BlogBundle/Entity/Author.php
namespace Acme\BlogBundle\Entity;

use Symfony\Component\HttpFoundation\File\File;

class Author
{
    protected $bioFile;

    public function setBioFile(File $file = null)
    {
        $this-&gt;bioFile = $file;
    }

    public function getBioFile()
    {
        return $this-&gt;bioFile;
    }
}</pre>
</div>
<p>To guarantee that the <tt class="docutils literal"><span class="pre">bioFile</span></tt> <tt class="docutils literal"><span class="pre">File</span></tt> object is valid, and that it is
below a certain file size and a valid PDF, add the following:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">bioFile</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">File</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">maxSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1024k</span>
                <span class="l-Scalar-Plain">mimeTypes</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">application/pdf</span><span class="p-Indicator">,</span> <span class="nv">application/x-pdf</span><span class="p-Indicator">]</span>
                <span class="l-Scalar-Plain">mimeTypesMessage</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Please upload a valid PDF</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\File(</span>
<span class="sd">     *     maxSize = &quot;1024k&quot;,</span>
<span class="sd">     *     mimeTypes = {&quot;application/pdf&quot;, &quot;application/x-pdf&quot;},</span>
<span class="sd">     *     mimeTypesMessage = &quot;Please upload a valid PDF&quot;</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$bioFile</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;bioFile&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;File&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;maxSize&quot;</span><span class="nt">&gt;</span>1024k<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;mimeTypes&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>application/pdf<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;value&gt;</span>application/x-pdf<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;mimeTypesMessage&quot;</span><span class="nt">&gt;</span>Please upload a valid PDF<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/class&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="c1">// ...</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\File</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;bioFile&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">File</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;maxSize&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1024k&#39;</span><span class="p">,</span>
            <span class="s1">&#39;mimeTypes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;application/pdf&#39;</span><span class="p">,</span>
                <span class="s1">&#39;application/x-pdf&#39;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s1">&#39;mimeTypesMessage&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please upload a valid PDF&#39;</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>The <tt class="docutils literal"><span class="pre">bioFile</span></tt> property is validated to guarantee that it is a real file.
Its size and mime type are also validated because the appropriate options
have been specified.</p>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="maxsize">
<h3>maxSize<a class="headerlink" href="#maxsize" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">mixed</span></tt></p>
<p>If set, the size of the underlying file must be below this file size in order
to be valid. The size of the file can be given in one of the following formats:</p>
<ul class="simple">
<li><strong>bytes</strong>: To specify the <tt class="docutils literal"><span class="pre">maxSize</span></tt> in bytes, pass a value that is entirely
numeric (e.g. <tt class="docutils literal"><span class="pre">4096</span></tt>);</li>
<li><strong>kilobytes</strong>: To specify the <tt class="docutils literal"><span class="pre">maxSize</span></tt> in kilobytes, pass a number and
suffix it with a lowercase &#8220;k&#8221; (e.g. <tt class="docutils literal"><span class="pre">200k</span></tt>);</li>
<li><strong>megabytes</strong>: To specify the <tt class="docutils literal"><span class="pre">maxSize</span></tt> in megabytes, pass a number and
suffix it with a capital &#8220;M&#8221; (e.g. <tt class="docutils literal"><span class="pre">4M</span></tt>).</li>
</ul>
</div>
<div class="section" id="mimetypes">
<h3>mimeTypes<a class="headerlink" href="#mimetypes" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">array</span></tt> or <tt class="docutils literal"><span class="pre">string</span></tt></p>
<p>If set, the validator will check that the mime type of the underlying file
is equal to the given mime type (if a string) or exists in the collection
of given mime types (if an array).</p>
<p>You can find a list of existing mime types on the <a class="reference external" href="http://www.iana.org/assignments/media-types/index.html">IANA website</a></p>
</div>
<div class="section" id="maxsizemessage">
<h3>maxSizeMessage<a class="headerlink" href="#maxsizemessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">is</span> <span class="pre">too</span> <span class="pre">large</span> <span class="pre">({{</span> <span class="pre">size</span> <span class="pre">}}).</span> <span class="pre">Allowed</span> <span class="pre">maximum</span> <span class="pre">size</span> <span class="pre">is</span> <span class="pre">{{</span> <span class="pre">limit</span> <span class="pre">}}</span></tt></p>
<p>The message displayed if the file is larger than the <a class="reference internal" href="#maxsize">maxSize</a> option.</p>
</div>
<div class="section" id="mimetypesmessage">
<h3>mimeTypesMessage<a class="headerlink" href="#mimetypesmessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">mime</span> <span class="pre">type</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">file</span> <span class="pre">is</span> <span class="pre">invalid</span> <span class="pre">({{</span> <span class="pre">type</span> <span class="pre">}}).</span> <span class="pre">Allowed</span> <span class="pre">mime</span> <span class="pre">types</span> <span class="pre">are</span> <span class="pre">{{</span> <span class="pre">types</span> <span class="pre">}}</span></tt></p>
<p>The message displayed if the mime type of the file is not a valid mime type
per the <a class="reference internal" href="#mimetypes">mimeTypes</a> option.</p>
</div>
<div class="section" id="notfoundmessage">
<h3>notFoundMessage<a class="headerlink" href="#notfoundmessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">could</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">found</span></tt></p>
<p>The message displayed if no file can be found at the given path. This error
is only likely if the underlying value is a string path, as a <tt class="docutils literal"><span class="pre">File</span></tt> object
cannot be constructed with an invalid file path.</p>
</div>
<div class="section" id="notreadablemessage">
<h3>notReadableMessage<a class="headerlink" href="#notreadablemessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">readable</span></tt></p>
<p>The message displayed if the file exists, but the PHP <tt class="docutils literal"><span class="pre">is_readable</span></tt> function
fails when passed the path to the file.</p>
</div>
<div class="section" id="uploadinisizeerrormessage">
<h3>uploadIniSizeErrorMessage<a class="headerlink" href="#uploadinisizeerrormessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">is</span> <span class="pre">too</span> <span class="pre">large.</span> <span class="pre">Allowed</span> <span class="pre">maximum</span> <span class="pre">size</span> <span class="pre">is</span> <span class="pre">{{</span> <span class="pre">limit</span> <span class="pre">}}</span></tt></p>
<p>The message that is displayed if the uploaded file is larger than the <tt class="docutils literal"><span class="pre">upload_max_filesize</span></tt>
PHP.ini setting.</p>
</div>
<div class="section" id="uploadformsizeerrormessage">
<h3>uploadFormSizeErrorMessage<a class="headerlink" href="#uploadformsizeerrormessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">is</span> <span class="pre">too</span> <span class="pre">large</span></tt></p>
<p>The message that is displayed if the uploaded file is larger than allowed
by the HTML file input field.</p>
</div>
<div class="section" id="uploaderrormessage">
<h3>uploadErrorMessage<a class="headerlink" href="#uploaderrormessage" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">could</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">uploaded</span></tt></p>
<p>The message that is displayed if the uploaded file could not be uploaded
for some unknown reason, such as the file upload failed or it couldn&#8217;t be written
to disk.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">File</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#options">Options</a><ul>
<li><a class="reference internal" href="#maxsize">maxSize</a></li>
<li><a class="reference internal" href="#mimetypes">mimeTypes</a></li>
<li><a class="reference internal" href="#maxsizemessage">maxSizeMessage</a></li>
<li><a class="reference internal" href="#mimetypesmessage">mimeTypesMessage</a></li>
<li><a class="reference internal" href="#notfoundmessage">notFoundMessage</a></li>
<li><a class="reference internal" href="#notreadablemessage">notReadableMessage</a></li>
<li><a class="reference internal" href="#uploadinisizeerrormessage">uploadIniSizeErrorMessage</a></li>
<li><a class="reference internal" href="#uploadformsizeerrormessage">uploadFormSizeErrorMessage</a></li>
<li><a class="reference internal" href="#uploaderrormessage">uploadErrorMessage</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Country.html"
                        title="previous chapter">Country</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Image.html"
                        title="next chapter">Image</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/reference/constraints/File.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Image.html" title="Image"
             >next</a> |</li>
        <li class="right" >
          <a href="Country.html" title="Country"
             >previous</a> |</li>
        <li><a href="../../index.html">Symfony2Docs v2.1.0 2.1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Reference Documents</a> &raquo;</li>
          <li><a href="../constraints.html" >Validation Constraints Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>