

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Submitting a Patch &mdash; Symfony2Docs v.2.0.17 2.0.17 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs v.2.0.17 2.0.17 documentation" href="../../index.html" />
    <link rel="up" title="Contributing Code" href="index.html" />
    <link rel="next" title="Reporting a Security Issue" href="security.html" />
    <link rel="prev" title="Reporting a Bug" href="bugs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="security.html" title="Reporting a Security Issue"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="bugs.html" title="Reporting a Bug"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Symfony2Docs v.2.0.17 2.0.17 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Contributing</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Contributing Code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="submitting-a-patch">
<h1>Submitting a Patch<a class="headerlink" href="#submitting-a-patch" title="Permalink to this headline">¶</a></h1>
<p>Patches are the best way to provide a bug fix or to propose enhancements to
Symfony2.</p>
<div class="section" id="step-1-setup-your-environment">
<h2>Step 1: Setup your Environment<a class="headerlink" href="#step-1-setup-your-environment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-the-software-stack">
<h3>Install the Software Stack<a class="headerlink" href="#install-the-software-stack" title="Permalink to this headline">¶</a></h3>
<p>Before working on Symfony2, setup a friendly environment with the following
software:</p>
<ul class="simple">
<li>Git;</li>
<li>PHP version 5.3.2 or above;</li>
<li>PHPUnit 3.5.11 or above.</li>
</ul>
</div>
<div class="section" id="configure-git">
<h3>Configure Git<a class="headerlink" href="#configure-git" title="Permalink to this headline">¶</a></h3>
<p>Set up your user information with your real name and a working email address:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git config --global user.name <span class="s2">&quot;Your Name&quot;</span>
<span class="nv">$ </span>git config --global user.email you@example.com
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you are new to Git, we highly recommend you to read the excellent and
free <a class="reference external" href="http://progit.org/">ProGit</a> book.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If your IDE creates configuration files inside project&#8217;s directory,
you can use global <tt class="docutils literal"><span class="pre">.gitignore</span></tt> file (for all projects) or
<tt class="docutils literal"><span class="pre">.git/info/exclude</span></tt> file (per project) to ignore them. See
<a class="reference external" href="https://help.github.com/articles/ignoring-files">Github&#8217;s documentation</a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Windows users: when installing Git, the installer will ask what to do with
line endings and suggests to replace all Lf by CRLF. This is the wrong
setting if you wish to contribute to Symfony! Selecting the as-is method is
your best choice, as git will convert your line feeds to the ones in the
repository. If you have already installed Git, you can check the value of
this setting by typing:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git config core.autocrlf
</pre></div>
</div>
<p>This will return either &#8220;false&#8221;, &#8220;input&#8221; or &#8220;true&#8221;, &#8220;true&#8221; and &#8220;false&#8221; being
the wrong values. Set it to another value by typing:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git config --global core.autocrlf input
</pre></div>
</div>
<p class="last">Replace &#8211;global by &#8211;local if you want to set it only for the active
repository</p>
</div>
</div>
<div class="section" id="get-the-symfony-source-code">
<h3>Get the Symfony Source Code<a class="headerlink" href="#get-the-symfony-source-code" title="Permalink to this headline">¶</a></h3>
<p>Get the Symfony2 source code:</p>
<ul class="simple">
<li>Create a <a class="reference external" href="https://github.com/signup/free">GitHub</a> account and sign in;</li>
<li>Fork the <a class="reference external" href="https://github.com/symfony/symfony">Symfony2 repository</a> (click on the &#8220;Fork&#8221; button);</li>
<li>After the &#8220;hardcore forking action&#8221; has completed, clone your fork locally
(this will create a <cite>symfony</cite> directory):</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git clone git@github.com:USERNAME/symfony.git
</pre></div>
</div>
<ul class="simple">
<li>Add the upstream repository as <tt class="docutils literal"><span class="pre">remote</span></tt>:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>symfony
<span class="nv">$ </span>git remote add upstream git://github.com/symfony/symfony.git
</pre></div>
</div>
</div>
<div class="section" id="check-that-the-current-tests-pass">
<h3>Check that the current Tests pass<a class="headerlink" href="#check-that-the-current-tests-pass" title="Permalink to this headline">¶</a></h3>
<p>Now that Symfony2 is installed, check that all unit tests pass for your
environment as explained in the dedicated <a class="reference internal" href="tests.html"><em>document</em></a>.</p>
</div>
</div>
<div class="section" id="step-2-work-on-your-patch">
<h2>Step 2: Work on your Patch<a class="headerlink" href="#step-2-work-on-your-patch" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-license">
<h3>The License<a class="headerlink" href="#the-license" title="Permalink to this headline">¶</a></h3>
<p>Before you start, you must know that all the patches you are going to submit
must be released under the <em>MIT license</em>, unless explicitly specified in your
commits.</p>
</div>
<div class="section" id="choose-the-right-branch">
<h3>Choose the right Branch<a class="headerlink" href="#choose-the-right-branch" title="Permalink to this headline">¶</a></h3>
<p>Before working on a patch, you must determine on which branch you need to
work. The branch should be based on the <cite>master</cite> branch if you want to add a
new feature. But if you want to fix a bug, use the oldest but still maintained
version of Symfony where the bug happens (like <cite>2.0</cite>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All bug fixes merged into maintenance branches are also merged into more
recent branches on a regular basis. For instance, if you submit a patch
for the <cite>2.0</cite> branch, the patch will also be applied by the core team on
the <cite>master</cite> branch.</p>
</div>
</div>
<div class="section" id="create-a-topic-branch">
<h3>Create a Topic Branch<a class="headerlink" href="#create-a-topic-branch" title="Permalink to this headline">¶</a></h3>
<p>Each time you want to work on a patch for a bug or on an enhancement, create a
topic branch:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git checkout -b BRANCH_NAME master
</pre></div>
</div>
<p>Or, if you want to provide a bugfix for the 2.0 branch, first track the remote
<cite>2.0</cite> branch locally:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git checkout -t origin/2.0
</pre></div>
</div>
<p>Then create a new branch off the 2.0 branch to work on the bugfix:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git checkout -b BRANCH_NAME 2.0
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Use a descriptive name for your branch (<cite>ticket_XXX</cite> where <cite>XXX</cite> is the
ticket number is a good convention for bug fixes).</p>
</div>
<p>The above checkout commands automatically switch the code to the newly created
branch (check the branch you are working on with <cite>git branch</cite>).</p>
</div>
<div class="section" id="work-on-your-patch">
<h3>Work on your Patch<a class="headerlink" href="#work-on-your-patch" title="Permalink to this headline">¶</a></h3>
<p>Work on the code as much as you want and commit as much as you want; but keep
in mind the following:</p>
<ul class="simple">
<li>Follow the coding <a class="reference internal" href="standards.html"><em>standards</em></a> (use <cite>git diff &#8211;check</cite> to
check for trailing spaces &#8211; also read the tip below);</li>
<li>Add unit tests to prove that the bug is fixed or that the new feature
actually works;</li>
<li>Try hard to not break backward compatibility (if you must do so, try to
provide a compatibility layer to support the old way) &#8211; patches that break
backward compatibility have less chance to be merged;</li>
<li>Do atomic and logically separate commits (use the power of <cite>git rebase</cite> to
have a clean and logical history);</li>
<li>Squash irrelevant commits that are just about fixing coding standards or
fixing typos in your own code;</li>
<li>Never fix coding standards in some existing code as it makes the code review
more difficult;</li>
<li>Write good commit messages (see the tip below).</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>You can check the coding standards of your patch by running the following
<a class="reference external" href="http://cs.sensiolabs.org/get/php-cs-fixer.phar">script</a>
(<a class="reference external" href="https://github.com/fabpot/PHP-CS-Fixer">source</a>):</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /path/to/symfony/src
<span class="nv">$ </span>php symfony-cs-fixer.phar fix . Symfony20Finder
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A good commit message is composed of a summary (the first line),
optionally followed by a blank line and a more detailed description. The
summary should start with the Component you are working on in square
brackets (<tt class="docutils literal"><span class="pre">[DependencyInjection]</span></tt>, <tt class="docutils literal"><span class="pre">[FrameworkBundle]</span></tt>, ...). Use a
verb (<tt class="docutils literal"><span class="pre">fixed</span> <span class="pre">...</span></tt>, <tt class="docutils literal"><span class="pre">added</span> <span class="pre">...</span></tt>, ...) to start the summary and don&#8217;t
add a period at the end.</p>
</div>
</div>
<div class="section" id="prepare-your-patch-for-submission">
<h3>Prepare your Patch for Submission<a class="headerlink" href="#prepare-your-patch-for-submission" title="Permalink to this headline">¶</a></h3>
<p>When your patch is not about a bug fix (when you add a new feature or change
an existing one for instance), it must also include the following:</p>
<ul class="simple">
<li>An explanation of the changes in the relevant CHANGELOG file(s);</li>
<li>An explanation on how to upgrade an existing application in the relevant
UPGRADE file(s) if the changes break backward compatibility.</li>
</ul>
</div>
</div>
<div class="section" id="step-3-submit-your-patch">
<h2>Step 3: Submit your Patch<a class="headerlink" href="#step-3-submit-your-patch" title="Permalink to this headline">¶</a></h2>
<p>Whenever you feel that your patch is ready for submission, follow the
following steps.</p>
<div class="section" id="rebase-your-patch">
<h3>Rebase your Patch<a class="headerlink" href="#rebase-your-patch" title="Permalink to this headline">¶</a></h3>
<p>Before submitting your patch, update your branch (needed if it takes you a
while to finish your changes):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git checkout master
<span class="nv">$ </span>git fetch upstream
<span class="nv">$ </span>git merge upstream/master
<span class="nv">$ </span>git checkout BRANCH_NAME
<span class="nv">$ </span>git rebase master
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Replace <cite>master</cite> with <cite>2.0</cite> if you are working on a bugfix</p>
</div>
<p>When doing the <tt class="docutils literal"><span class="pre">rebase</span></tt> command, you might have to fix merge conflicts.
<tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt> will show you the <em>unmerged</em> files. Resolve all the conflicts,
then continue the rebase:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git add ... <span class="c"># add resolved files</span>
<span class="nv">$ </span>git rebase --continue
</pre></div>
</div>
<p>Check that all tests still pass and push your branch remotely:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git push origin BRANCH_NAME
</pre></div>
</div>
</div>
<div class="section" id="make-a-pull-request">
<h3>Make a Pull Request<a class="headerlink" href="#make-a-pull-request" title="Permalink to this headline">¶</a></h3>
<p>You can now make a pull request on the <tt class="docutils literal"><span class="pre">symfony/symfony</span></tt> Github repository.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Take care to point your pull request towards <tt class="docutils literal"><span class="pre">symfony:2.0</span></tt> if you want
the core team to pull a bugfix based on the 2.0 branch.</p>
</div>
<p>To ease the core team work, always include the modified components in your
pull request message, like in:</p>
<div class="highlight-text"><div class="highlight"><pre>[Yaml] fixed something
[Form] [Validator] [FrameworkBundle] added something
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Please use the title with &#8220;[WIP]&#8221; if the submission is not yet completed
or the tests are incomplete or not yet passing.</p>
</div>
<p>The pull request description must include the following check list to ensure
that contributions may be reviewed without needless feedback loops and that
your contributions can be included into Symfony2 as quickly as possible:</p>
<div class="highlight-text"><div class="highlight"><pre>Bug fix: [yes|no]
Feature addition: [yes|no]
Backwards compatibility break: [yes|no]
Symfony2 tests pass: [yes|no]
Fixes the following tickets: [comma separated list of tickets fixed by the PR]
Todo: [list of todos pending]
License of the code: MIT
Documentation PR: [The reference to the documentation PR if any]
</pre></div>
</div>
<p>An example submission could now look as follows:</p>
<div class="highlight-text"><div class="highlight"><pre>Bug fix: no
Feature addition: yes
Backwards compatibility break: no
Symfony2 tests pass: yes
Fixes the following tickets: #12, #43
Todo: -
License of the code: MIT
Documentation PR: symfony/symfony-docs#123
</pre></div>
</div>
<p>In the pull request description, give as much details as possible about your
changes (don&#8217;t hesitate to give code examples to illustrate your points). If
your pull request is about adding a new feature or modifying an existing one,
explain the rationale for the changes. The pull request description helps the
code review and it serves as a reference when the code is merged (the pull
request description and all its associated comments are part of the merge
commit message).</p>
<p>In addition to this &#8220;code&#8221; pull request, you must also send a pull request to
the <a class="reference external" href="https://github.com/symfony/symfony-docs">documentation repository</a> to update the documentation when appropriate.</p>
</div>
<div class="section" id="rework-your-patch">
<h3>Rework your Patch<a class="headerlink" href="#rework-your-patch" title="Permalink to this headline">¶</a></h3>
<p>Based on the feedback on the pull request, you might need to rework your
patch. Before re-submitting the patch, rebase with <tt class="docutils literal"><span class="pre">upstream/master</span></tt> or
<tt class="docutils literal"><span class="pre">upstream/2.0</span></tt>, don&#8217;t merge; and force the push to the origin:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git rebase -f upstream/master
<span class="nv">$ </span>git push -f origin BRANCH_NAME
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when doing a <tt class="docutils literal"><span class="pre">push</span> <span class="pre">--force</span></tt>, always specify the branch name explicitly
to avoid messing other branches in the repo (<tt class="docutils literal"><span class="pre">--force</span></tt> tells git that
you really want to mess with things so do it carefully).</p>
</div>
<p>Often, moderators will ask you to &#8220;squash&#8221; your commits. This means you will
convert many commits to one commit. To do this, use the rebase command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git rebase -i HEAD~3
<span class="nv">$ </span>git push -f origin BRANCH_NAME
</pre></div>
</div>
<p>The number 3 here must equal the amount of commits in your branch. After you
type this command, an editor will popup showing a list of commits:</p>
<div class="highlight-text"><div class="highlight"><pre>pick 1a31be6 first commit
pick 7fc64b4 second commit
pick 7d33018 third commit
</pre></div>
</div>
<p>To squash all commits into the first one, remove the word &#8220;pick&#8221; before the
second and the last commits, and replace it by the word &#8220;squash&#8221; or just &#8220;s&#8221;.
When you save, git will start rebasing, and if successful, will ask you to
edit the commit message, which by default is a listing of the commit messages
of all the commits. When you finish, execute the push command.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To automatically get your feature branch tested, you can add your fork to
<a class="reference external" href="http://travis-ci.org">travis-ci.org</a>. Just login using your github.com account and then simply
flip a single switch to enable automated testing. In your pull request,
instead of specifying &#8220;<em>Symfony2 tests pass: [yes|no]</em>&#8221;, you can link to
the <a class="reference external" href="http://about.travis-ci.org/docs/user/status-images/">travis-ci.org status icon</a>. For more details, see the
<a class="reference external" href="http://about.travis-ci.org/docs/user/getting-started/">travis-ci.org Getting Started Guide</a>. This could easily be done by clicking
on the wrench icon on the build page of Travis. First select your feature
branch and then copy the markdown to your PR description.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Submitting a Patch</a><ul>
<li><a class="reference internal" href="#step-1-setup-your-environment">Step 1: Setup your Environment</a><ul>
<li><a class="reference internal" href="#install-the-software-stack">Install the Software Stack</a></li>
<li><a class="reference internal" href="#configure-git">Configure Git</a></li>
<li><a class="reference internal" href="#get-the-symfony-source-code">Get the Symfony Source Code</a></li>
<li><a class="reference internal" href="#check-that-the-current-tests-pass">Check that the current Tests pass</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-work-on-your-patch">Step 2: Work on your Patch</a><ul>
<li><a class="reference internal" href="#the-license">The License</a></li>
<li><a class="reference internal" href="#choose-the-right-branch">Choose the right Branch</a></li>
<li><a class="reference internal" href="#create-a-topic-branch">Create a Topic Branch</a></li>
<li><a class="reference internal" href="#work-on-your-patch">Work on your Patch</a></li>
<li><a class="reference internal" href="#prepare-your-patch-for-submission">Prepare your Patch for Submission</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-3-submit-your-patch">Step 3: Submit your Patch</a><ul>
<li><a class="reference internal" href="#rebase-your-patch">Rebase your Patch</a></li>
<li><a class="reference internal" href="#make-a-pull-request">Make a Pull Request</a></li>
<li><a class="reference internal" href="#rework-your-patch">Rework your Patch</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="bugs.html"
                        title="previous chapter">Reporting a Bug</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="security.html"
                        title="next chapter">Reporting a Security Issue</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/contributing/code/patches.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="security.html" title="Reporting a Security Issue"
             >next</a> |</li>
        <li class="right" >
          <a href="bugs.html" title="Reporting a Bug"
             >previous</a> |</li>
        <li><a href="../../index.html">Symfony2Docs v.2.0.17 2.0.17 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Contributing</a> &raquo;</li>
          <li><a href="index.html" >Contributing Code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>