<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>entity Field Type &mdash; Symfony2 Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Symfony2 Framework Documentation  documentation" href="../../../index.html" />
    <link rel="up" title="Form Types Reference" href="../types.html" />
    <link rel="next" title="country Field Type" href="country.html" />
    <link rel="prev" title="choice Field Type" href="choice.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="country.html" title="country Field Type"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="choice.html" title="choice Field Type"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">Symfony2 Framework Documentation  documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Reference Documents</a> &raquo;</li>
          <li><a href="../types.html" accesskey="U">Form Types Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="entity-field-type">
<span id="index-0"></span><h1>entity Field Type<a class="headerlink" href="#entity-field-type" title="Permalink to this headline">¶</a></h1>
<p>A special <tt class="docutils literal"><span class="pre">choice</span></tt> field that&#8217;s designed to load options from a Doctrine
entity. For example, if you have a <tt class="docutils literal"><span class="pre">Category</span></tt> entity, you could use this
field to display a <tt class="docutils literal"><span class="pre">select</span></tt> field of all, or some, of the <tt class="docutils literal"><span class="pre">Category</span></tt>
objects from the database.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Rendered as</td>
<td>can be various tags (see <a class="reference internal" href="choice.html#forms-reference-choice-tags"><em>Select Tag, Checkboxes or Radio Buttons</em></a>)</td>
</tr>
<tr class="row-even"><td>Options</td>
<td><ul class="first last simple">
<li><a class="reference internal" href="#class">class</a></li>
<li><a class="reference internal" href="#data-class">data_class</a></li>
<li><a class="reference internal" href="#property">property</a></li>
<li><a class="reference internal" href="#group-by">group_by</a></li>
<li><a class="reference internal" href="#query-builder">query_builder</a></li>
<li><a class="reference internal" href="#em">em</a></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Overridden
Options</td>
<td><ul class="first last simple">
<li><a class="reference internal" href="#choices">choices</a></li>
<li><a class="reference internal" href="#choice-list">choice_list</a></li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Inherited
options</td>
<td><ul class="first last simple">
<li><a class="reference internal" href="#multiple">multiple</a></li>
<li><a class="reference internal" href="#expanded">expanded</a></li>
<li><a class="reference internal" href="#preferred-choices">preferred_choices</a></li>
<li><a class="reference internal" href="#empty-value">empty_value</a></li>
<li><a class="reference internal" href="#empty-data">empty_data</a></li>
<li><a class="reference internal" href="#required">required</a></li>
<li><a class="reference internal" href="#label">label</a></li>
<li><a class="reference internal" href="#label-attr">label_attr</a></li>
<li><a class="reference internal" href="#data">data</a></li>
<li><a class="reference internal" href="#read-only">read_only</a></li>
<li><a class="reference internal" href="#disabled">disabled</a></li>
<li><a class="reference internal" href="#error-bubbling">error_bubbling</a></li>
<li><a class="reference internal" href="#error-mapping">error_mapping</a></li>
<li><a class="reference internal" href="#mapped">mapped</a></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Parent type</td>
<td><a class="reference internal" href="choice.html"><em>choice</em></a></td>
</tr>
<tr class="row-even"><td>Class</td>
<td><tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Bridge/Doctrine/Form/Type/EntityType.html" title="Symfony\Bridge\Doctrine\Form\Type\EntityType"><span class="pre">EntityType</span></a></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">entity</span></tt> type has just one required option: the entity which should
be listed inside the choice field:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:User&#39;</span><span class="p">,</span>
    <span class="s1">&#39;property&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
<p>In this case, all <tt class="docutils literal"><span class="pre">User</span></tt> objects will be loaded from the database and rendered
as either a <tt class="docutils literal"><span class="pre">select</span></tt> tag, a set or radio buttons or a series of checkboxes
(this depends on the <tt class="docutils literal"><span class="pre">multiple</span></tt> and <tt class="docutils literal"><span class="pre">expanded</span></tt> values).
If the entity object does not have a <tt class="docutils literal"><span class="pre">__toString()</span></tt> method the <tt class="docutils literal"><span class="pre">property</span></tt> option
is needed.</p>
<div class="section" id="using-a-custom-query-for-the-entities">
<h3>Using a Custom Query for the Entities<a class="headerlink" href="#using-a-custom-query-for-the-entities" title="Permalink to this headline">¶</a></h3>
<p>If you need to specify a custom query to use when fetching the entities (e.g.
you only want to return some entities, or need to order them), use the <tt class="docutils literal"><span class="pre">query_builder</span></tt>
option. The easiest way to use the option is as follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Doctrine\ORM\EntityRepository</span><span class="p">;</span>
<span class="c1">// ...</span>

<span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:User&#39;</span><span class="p">,</span>
    <span class="s1">&#39;query_builder&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nx">EntityRepository</span> <span class="nv">$er</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$er</span><span class="o">-&gt;</span><span class="na">createQueryBuilder</span><span class="p">(</span><span class="s1">&#39;u&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">orderBy</span><span class="p">(</span><span class="s1">&#39;u.username&#39;</span><span class="p">,</span> <span class="s1">&#39;ASC&#39;</span><span class="p">);</span>
    <span class="p">},</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="using-choices">
<span id="reference-forms-entity-choices"></span><h3>Using Choices<a class="headerlink" href="#using-choices" title="Permalink to this headline">¶</a></h3>
<p>If you already have the exact collection of entities that you want included
in the choice element, you can simply pass them via the <tt class="docutils literal"><span class="pre">choices</span></tt> key.
For example, if you have a <tt class="docutils literal"><span class="pre">$group</span></tt> variable (passed into your form perhaps
as a form option) and <tt class="docutils literal"><span class="pre">getUsers</span></tt> returns a collection of <tt class="docutils literal"><span class="pre">User</span></tt> entities,
then you can supply the <tt class="docutils literal"><span class="pre">choices</span></tt> option directly:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:User&#39;</span><span class="p">,</span>
    <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="nv">$group</span><span class="o">-&gt;</span><span class="na">getUsers</span><span class="p">(),</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="select-tag-checkboxes-or-radio-buttons">
<h2>Select Tag, Checkboxes or Radio Buttons<a class="headerlink" href="#select-tag-checkboxes-or-radio-buttons" title="Permalink to this headline">¶</a></h2>
<p>This field may be rendered as one of several different HTML fields, depending
on the <tt class="docutils literal"><span class="pre">expanded</span></tt> and <tt class="docutils literal"><span class="pre">multiple</span></tt> options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="68%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">element type</th>
<th class="head">expanded</th>
<th class="head">multiple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>select tag</td>
<td>false</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>select tag (with <tt class="docutils literal"><span class="pre">multiple</span></tt> attribute)</td>
<td>false</td>
<td>true</td>
</tr>
<tr class="row-even"><td>radio buttons</td>
<td>true</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>checkboxes</td>
<td>true</td>
<td>true</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="field-options">
<h2>Field Options<a class="headerlink" href="#field-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="class">
<h3>class<a class="headerlink" href="#class" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>required</strong></p>
<p>The class of your entity (e.g. <tt class="docutils literal"><span class="pre">AcmeStoreBundle:Category</span></tt>). This can be
a fully-qualified class name (e.g. <tt class="docutils literal"><span class="pre">Acme\StoreBundle\Entity\Category</span></tt>)
or the short alias name (as shown prior).</p>
</div>
<div class="section" id="data-class">
<h3>data_class<a class="headerlink" href="#data-class" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt></p>
<p>This option is used to set the appropriate data mapper to be used by the form,
so you can use it for any form field type which requires an object.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="s1">&#39;sonata_media_type&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;data_class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Acme\DemoBundle\Entity\Media&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="property">
<h3>property<a class="headerlink" href="#property" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt></p>
<p>This is the property that should be used for displaying the entities
as text in the HTML element. If left blank, the entity object will be
cast into a string and so must have a <tt class="docutils literal"><span class="pre">__toString()</span></tt> method.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <tt class="docutils literal"><span class="pre">property</span></tt> option is the property path used to display the option. So you
can use anything supported by the
<a class="reference internal" href="../../../components/property_access/introduction.html"><em>PropertyAccessor component</em></a></p>
<p>For example, if the translations property is actually an associative array of
objects, each with a name property, then you could do this:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
   <span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;MyBundle:Gender&#39;</span><span class="p">,</span>
   <span class="s1">&#39;property&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;translations[en].name&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="group-by">
<h3>group_by<a class="headerlink" href="#group-by" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt></p>
<p>This is a property path (e.g. <tt class="docutils literal"><span class="pre">author.name</span></tt>) used to organize the
available choices in groups. It only works when rendered as a select tag
and does so by adding <tt class="docutils literal"><span class="pre">optgroup</span></tt> elements around options. Choices that do not
return a value for this property path are rendered directly under the
select tag, without a surrounding optgroup.</p>
</div>
<div class="section" id="query-builder">
<h3>query_builder<a class="headerlink" href="#query-builder" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">Doctrine\ORM\QueryBuilder</span></tt> or a Closure</p>
<p>If specified, this is used to query the subset of options (and their
order) that should be used for the field. The value of this option can
either be a <tt class="docutils literal"><span class="pre">QueryBuilder</span></tt> object or a Closure. If using a Closure,
it should take a single argument, which is the <tt class="docutils literal"><span class="pre">EntityRepository</span></tt> of
the entity.</p>
</div>
<div class="section" id="em">
<h3>em<a class="headerlink" href="#em" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: the default entity manager</p>
<p>If specified, the specified entity manager will be used to load the choices
instead of the default entity manager.</p>
</div>
</div>
<div class="section" id="overridden-options">
<h2>Overridden Options<a class="headerlink" href="#overridden-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="choices">
<h3>choices<a class="headerlink" href="#choices" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>:  array || <tt class="docutils literal"><span class="pre">\Traversable</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">null</span></tt></p>
<p>Instead of allowing the <a class="reference internal" href="#class">class</a> and <a class="reference internal" href="#query-builder">query_builder</a> options to fetch the
entities to include for you, you can pass the <tt class="docutils literal"><span class="pre">choices</span></tt> option directly.
See <a class="reference internal" href="#reference-forms-entity-choices"><em>Using Choices</em></a>.</p>
</div>
<div class="section" id="choice-list">
<h3>choice_list<a class="headerlink" href="#choice-list" title="Permalink to this headline">¶</a></h3>
<p><strong>default</strong>: <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Bridge/Doctrine/Form/ChoiceList/EntityChoiceList.html" title="Symfony\Bridge\Doctrine\Form\ChoiceList\EntityChoiceList"><span class="pre">EntityChoiceList</span></a></tt></p>
<p>The purpose of the <tt class="docutils literal"><span class="pre">entity</span></tt> type is to create and configure this <tt class="docutils literal"><span class="pre">EntityChoiceList</span></tt>
for you, by using all of the above options. If you need to override this
option, you may just consider using the <a class="reference internal" href="choice.html"><em>choice Field Type</em></a>
directly.</p>
</div>
</div>
<div class="section" id="inherited-options">
<h2>Inherited Options<a class="headerlink" href="#inherited-options" title="Permalink to this headline">¶</a></h2>
<p>These options inherit from the <a class="reference internal" href="choice.html"><em>choice</em></a> type:</p>
<div class="section" id="multiple">
<h3>multiple<a class="headerlink" href="#multiple" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">false</span></tt></p>
<p>If true, the user will be able to select multiple options (as opposed
to choosing just one option). Depending on the value of the <tt class="docutils literal"><span class="pre">expanded</span></tt>
option, this will render either a select tag or checkboxes if true and
a select tag or radio buttons if false. The returned value will be an array.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are working with a collection of Doctrine entities, it will be helpful
to read the documentation for the <a class="reference internal" href="collection.html"><em>collection Field Type</em></a>
as well. In addition, there is a complete example in the cookbook article
<a class="reference internal" href="../../../cookbook/form/form_collections.html"><em>How to Embed a Collection of Forms</em></a>.</p>
</div>
</div>
<div class="section" id="expanded">
<h3>expanded<a class="headerlink" href="#expanded" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">false</span></tt></p>
<p>If set to true, radio buttons or checkboxes will be rendered (depending
on the <tt class="docutils literal"><span class="pre">multiple</span></tt> value). If false, a select element will be rendered.</p>
</div>
<div class="section" id="preferred-choices">
<h3>preferred_choices<a class="headerlink" href="#preferred-choices" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">array</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">array()</span></tt></p>
<p>If this option is specified, then a sub-set of all of the options will be
moved to the top of the select menu. The following would move the &#8220;Baz&#8221; option
to the top, with a visual separator between it and the rest of the options:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;foo_choices&#39;</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Baz&#39;</span><span class="p">),</span>
    <span class="s1">&#39;preferred_choices&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
<p>Note that preferred choices are only meaningful when rendering as a <tt class="docutils literal"><span class="pre">select</span></tt>
element (i.e. <tt class="docutils literal"><span class="pre">expanded</span></tt> is false). The preferred choices and normal choices
are separated visually by a set of dotted lines (i.e. <tt class="docutils literal"><span class="pre">-------------------</span></tt>).
This can be customized when rendering the field:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form_widget</span><span class="o">(</span><span class="nv">form.foo_choices</span><span class="o">,</span> <span class="o">{</span> <span class="s1">&#39;separator&#39;</span><span class="o">:</span> <span class="s1">&#39;=====&#39;</span> <span class="o">})</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">widget</span><span class="p">(</span><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;foo_choices&#39;</span><span class="p">],</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;separator&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;=====&#39;</span><span class="p">))</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option expects an array of entity objects, unlike the <tt class="docutils literal"><span class="pre">choice</span></tt> field
that requires an array of keys.</p>
</div>
</div>
<div class="section" id="empty-value">
<h3>empty_value<a class="headerlink" href="#empty-value" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3: </span>Since Symfony 2.3, empty values are also supported if the <tt class="docutils literal"><span class="pre">expanded</span></tt>
option is set to true.</p>
</div>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> or <tt class="docutils literal"><span class="pre">Boolean</span></tt></p>
<p>This option determines whether or not a special &#8220;empty&#8221; option (e.g. &#8220;Choose an option&#8221;)
will appear at the top of a select widget. This option only applies if the
<tt class="docutils literal"><span class="pre">multiple</span></tt> option is set to false.</p>
<ul>
<li><p class="first">Add an empty value with &#8220;Choose an option&#8221; as the text:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;states&#39;</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;empty_value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Choose an option&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
<li><p class="first">Guarantee that no &#8220;empty&#8221; value option is displayed:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;states&#39;</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;empty_value&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
<p>If you leave the <tt class="docutils literal"><span class="pre">empty_value</span></tt> option unset, then a blank (with no text)
option will automatically be added if and only if the <tt class="docutils literal"><span class="pre">required</span></tt> option
is false:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// a blank (with no text) option will be added</span>
<span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;states&#39;</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;required&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
<p>These options inherit from the <a class="reference internal" href="form.html"><em>form</em></a> type:</p>
</div>
<div class="section" id="empty-data">
<h3>empty_data<a class="headerlink" href="#empty-data" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">mixed</span></tt> <strong>default</strong>: depends on other field options, see below</p>
<p>This option determines what value the field will return when the submitted
value is empty. This may happen when the <tt class="docutils literal"><span class="pre">empty_value</span></tt> choice in a
<tt class="docutils literal"><span class="pre">choice</span></tt> field is selected or when an <tt class="docutils literal"><span class="pre">input</span></tt> field of some type is not
required and left empty by the user.</p>
<p>The true default value of this option depends on other field options:</p>
<ul class="simple">
<li>If <tt class="docutils literal"><span class="pre">data_class</span></tt> is set and <tt class="docutils literal"><span class="pre">required</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt>, then <tt class="docutils literal"><span class="pre">new</span> <span class="pre">$data_class()</span></tt>;</li>
<li>If <tt class="docutils literal"><span class="pre">data_class</span></tt> is set and <tt class="docutils literal"><span class="pre">required</span></tt> is <tt class="docutils literal"><span class="pre">false</span></tt>, then <tt class="docutils literal"><span class="pre">null</span></tt>;</li>
<li>If <tt class="docutils literal"><span class="pre">data_class</span></tt> is not set and <tt class="docutils literal"><span class="pre">compound</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt>, then <tt class="docutils literal"><span class="pre">array()</span></tt>;</li>
<li>If <tt class="docutils literal"><span class="pre">data_class</span></tt> is not set and <tt class="docutils literal"><span class="pre">compound</span></tt> is <tt class="docutils literal"><span class="pre">false</span></tt>, then <tt class="docutils literal"><span class="pre">''</span></tt> (empty string).</li>
</ul>
<p>But you can customize this to your needs. For example, if you want the
<tt class="docutils literal"><span class="pre">gender</span></tt> choice field to be explicitly set to <tt class="docutils literal"><span class="pre">null</span></tt> when no value is
selected, you can do it like this:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;gender&#39;</span><span class="p">,</span> <span class="s1">&#39;choice&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;choices&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;m&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Male&#39;</span><span class="p">,</span>
        <span class="s1">&#39;f&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Female&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;required&#39;</span>    <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="s1">&#39;empty_value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Choose your gender&#39;</span><span class="p">,</span>
    <span class="s1">&#39;empty_data&#39;</span>  <span class="o">=&gt;</span> <span class="k">null</span>
<span class="p">));</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to set the <tt class="docutils literal"><span class="pre">empty_data</span></tt> option for your entire form class,
see the cookbook article <a class="reference internal" href="../../../cookbook/form/use_empty_data.html"><em>How to configure Empty Data for a Form Class</em></a>.</p>
</div>
</div>
<div class="section" id="required">
<h3>required<a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">true</span></tt></p>
<p>If true, an <a class="reference external" href="http://diveintohtml5.info/forms.html">HTML5 required attribute</a> will be rendered. The corresponding
<tt class="docutils literal"><span class="pre">label</span></tt> will also render with a <tt class="docutils literal"><span class="pre">required</span></tt> class.</p>
<p>This is superficial and independent from validation. At best, if you let Symfony
guess your field type, then the value of this option will be guessed from
your validation information.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The required option also affects how empty data for each field is
handled. For more details, see the <a class="reference internal" href="#empty-data">empty_data</a> option.</p>
</div>
</div>
<div class="section" id="label">
<h3>label<a class="headerlink" href="#label" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">string</span></tt> <strong>default</strong>: The label is &#8220;guessed&#8221; from the field name</p>
<p>Sets the label that will be used when rendering the field. Setting to false
will suppress the label. The label can also be directly set inside the template:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form_label</span><span class="o">(</span><span class="nv">form.name</span><span class="o">,</span> <span class="s1">&#39;Your name&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">(</span>
    <span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Your name&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="label-attr">
<h3>label_attr<a class="headerlink" href="#label-attr" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">array</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">array()</span></tt></p>
<p>Sets the HTML attributes for the <tt class="docutils literal"><span class="pre">&lt;label&gt;</span></tt> element, which will be used when
rendering the label for the field. It&#8217;s an associative array with HTML attribute
as a key. This attributes can also be directly set inside the template:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">form_label</span><span class="o">(</span><span class="nv">form.name</span><span class="o">,</span> <span class="s1">&#39;Your name&#39;</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;label_attr&#39;</span><span class="o">:</span> <span class="o">{</span><span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="s1">&#39;CUSTOM_LABEL_CLASS&#39;</span><span class="cp">}}</span><span class="x">) }}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">label</span><span class="p">(</span>
    <span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Your name&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;label_attr&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;class&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CUSTOM_LABEL_CLASS&#39;</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="data">
<h3>data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: mixed <strong>default</strong>: Defaults to field of the underlying object (if there is one)</p>
<p>When you create a form, each field initially displays the value of the
corresponding property of the form&#8217;s domain object (if an object is bound
to the form). If you want to override the initial value for the form or just
an individual field, you can set it in the data option:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">,</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;data&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;abcdef&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default values for form fields are taken directly from the
underlying data structure (e.g. an entity or an array).
The <tt class="docutils literal"><span class="pre">data</span></tt> option overrides this default value.</p>
</div>
</div>
<div class="section" id="read-only">
<h3>read_only<a class="headerlink" href="#read-only" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">false</span></tt></p>
<p>If this option is true, the field will be rendered with the <tt class="docutils literal"><span class="pre">readonly</span></tt>
attribute so that the field is not editable.</p>
</div>
<div class="section" id="disabled">
<h3>disabled<a class="headerlink" href="#disabled" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">boolean</span></tt>  <strong>default</strong>: <tt class="docutils literal"><span class="pre">false</span></tt></p>
<p>If you don&#8217;t want a user to modify the value of a field, you can set
the disabled option to true. Any submitted value will be ignored.</p>
</div>
<div class="section" id="error-bubbling">
<h3>error_bubbling<a class="headerlink" href="#error-bubbling" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">false</span></tt> unless the form is <tt class="docutils literal"><span class="pre">compound</span></tt></p>
<p>If <tt class="docutils literal"><span class="pre">true</span></tt>, any errors for this field will be passed to the parent field
or form. For example, if set to <tt class="docutils literal"><span class="pre">true</span></tt> on a normal field, any errors for
that field will be attached to the main form, not to the specific field.</p>
</div>
<div class="section" id="error-mapping">
<h3>error_mapping<a class="headerlink" href="#error-mapping" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">array</span></tt> <strong>default</strong>: <tt class="docutils literal"><span class="pre">empty</span></tt></p>
<p>This option allows you to modify the target of a validation error.</p>
<p>Imagine you have a custom method named <tt class="docutils literal"><span class="pre">matchingCityAndZipCode</span></tt> that validates
whether the city and zip code match. Unfortunately, there is no &#8220;matchingCityAndZipCode&#8221;
field in your form, so all that Symfony can do is display the error on top
of the form.</p>
<p>With customized error mapping, you can do better: map the error to the city
field so that it displays above it:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">setDefaultOptions</span><span class="p">(</span><span class="nx">OptionsResolverInterface</span> <span class="nv">$resolver</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$resolver</span><span class="o">-&gt;</span><span class="na">setDefaults</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;error_mapping&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;matchingCityAndZipCode&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;city&#39;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here are the rules for the left and the right side of the mapping:</p>
<ul class="simple">
<li>The left side contains property paths;</li>
<li>If the violation is generated on a property or method of a class, its path
is simply <tt class="docutils literal"><span class="pre">propertyName</span></tt>;</li>
<li>If the violation is generated on an entry of an <tt class="docutils literal"><span class="pre">array</span></tt> or <tt class="docutils literal"><span class="pre">ArrayAccess</span></tt>
object, the property path is <tt class="docutils literal"><span class="pre">[indexName]</span></tt>;</li>
<li>You can construct nested property paths by concatenating them, separating
properties by dots. For example: <tt class="docutils literal"><span class="pre">addresses[work].matchingCityAndZipCode</span></tt>;</li>
<li>The left side of the error mapping also accepts a dot <tt class="docutils literal"><span class="pre">.</span></tt>, which refers
to the field itself. That means that any error added to the field is added
to the given nested field instead;</li>
<li>The right side contains simply the names of fields in the form.</li>
</ul>
</div>
<div class="section" id="mapped">
<h3>mapped<a class="headerlink" href="#mapped" title="Permalink to this headline">¶</a></h3>
<p><strong>type</strong>: <tt class="docutils literal"><span class="pre">boolean</span></tt>  <strong>default</strong>: <tt class="docutils literal"><span class="pre">true</span></tt></p>
<p>If you wish the field to be ignored when reading or writing to the object, you
can set the <tt class="docutils literal"><span class="pre">mapped</span></tt> option to <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">entity Field Type</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference internal" href="#using-a-custom-query-for-the-entities">Using a Custom Query for the Entities</a></li>
<li><a class="reference internal" href="#using-choices">Using Choices</a></li>
</ul>
</li>
<li><a class="reference internal" href="#select-tag-checkboxes-or-radio-buttons">Select Tag, Checkboxes or Radio Buttons</a></li>
<li><a class="reference internal" href="#field-options">Field Options</a><ul>
<li><a class="reference internal" href="#class">class</a></li>
<li><a class="reference internal" href="#data-class">data_class</a></li>
<li><a class="reference internal" href="#property">property</a></li>
<li><a class="reference internal" href="#group-by">group_by</a></li>
<li><a class="reference internal" href="#query-builder">query_builder</a></li>
<li><a class="reference internal" href="#em">em</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overridden-options">Overridden Options</a><ul>
<li><a class="reference internal" href="#choices">choices</a></li>
<li><a class="reference internal" href="#choice-list">choice_list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inherited-options">Inherited Options</a><ul>
<li><a class="reference internal" href="#multiple">multiple</a></li>
<li><a class="reference internal" href="#expanded">expanded</a></li>
<li><a class="reference internal" href="#preferred-choices">preferred_choices</a></li>
<li><a class="reference internal" href="#empty-value">empty_value</a></li>
<li><a class="reference internal" href="#empty-data">empty_data</a></li>
<li><a class="reference internal" href="#required">required</a></li>
<li><a class="reference internal" href="#label">label</a></li>
<li><a class="reference internal" href="#label-attr">label_attr</a></li>
<li><a class="reference internal" href="#data">data</a></li>
<li><a class="reference internal" href="#read-only">read_only</a></li>
<li><a class="reference internal" href="#disabled">disabled</a></li>
<li><a class="reference internal" href="#error-bubbling">error_bubbling</a></li>
<li><a class="reference internal" href="#error-mapping">error_mapping</a></li>
<li><a class="reference internal" href="#mapped">mapped</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="choice.html"
                        title="previous chapter">choice Field Type</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="country.html"
                        title="next chapter">country Field Type</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/reference/forms/types/entity.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="country.html" title="country Field Type"
             >next</a> |</li>
        <li class="right" >
          <a href="choice.html" title="choice Field Type"
             >previous</a> |</li>
        <li><a href="../../../index.html">Symfony2 Framework Documentation  documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Reference Documents</a> &raquo;</li>
          <li><a href="../types.html" >Form Types Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>