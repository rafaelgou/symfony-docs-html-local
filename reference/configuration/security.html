<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SecurityBundle Configuration (“security”) &mdash; Symfony2 Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Symfony2 Framework Documentation  documentation" href="../../index.html" />
    <link rel="up" title="Reference Documents" href="../index.html" />
    <link rel="next" title="AsseticBundle Configuration (“assetic”)" href="assetic.html" />
    <link rel="prev" title="DoctrineBundle Configuration (“doctrine”)" href="doctrine.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="assetic.html" title="AsseticBundle Configuration (“assetic”)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="doctrine.html" title="DoctrineBundle Configuration (“doctrine”)"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Symfony2 Framework Documentation  documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Reference Documents</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="securitybundle-configuration-security">
<span id="index-0"></span><h1>SecurityBundle Configuration (&#8220;security&#8221;)<a class="headerlink" href="#securitybundle-configuration-security" title="Permalink to this headline">¶</a></h1>
<p>The security system is one of the most powerful parts of Symfony2, and can
largely be controlled via its configuration.</p>
<div class="section" id="full-default-configuration">
<h2>Full default Configuration<a class="headerlink" href="#full-default-configuration" title="Permalink to this headline">¶</a></h2>
<p>The following is the full default configuration for the security system.
Each part will be explained in the next section.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.4: </span>Support for restricting security firewalls to a specific host was introduced in
Symfony 2.4.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5: </span>Support for restricting security firewalls to specific http methods was introduced in
Symfony 2.5.</p>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/security.yml</span>
<span class="l-Scalar-Plain">security</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">access_denied_url</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">~</span> <span class="c1"># Example: /foo/error403</span>

    <span class="c1"># strategy can be: none, migrate, invalidate</span>
    <span class="l-Scalar-Plain">session_fixation_strategy</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">migrate</span>
    <span class="l-Scalar-Plain">hide_user_not_found</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">always_authenticate_before_granting</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">false</span>
    <span class="l-Scalar-Plain">erase_credentials</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">access_decision_manager</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">strategy</span><span class="p-Indicator">:</span>             <span class="l-Scalar-Plain">affirmative</span>
        <span class="l-Scalar-Plain">allow_if_all_abstain</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">false</span>
        <span class="l-Scalar-Plain">allow_if_equal_granted_denied</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">true</span>
    <span class="l-Scalar-Plain">acl</span><span class="p-Indicator">:</span>

        <span class="c1"># any name configured in doctrine.dbal section</span>
        <span class="l-Scalar-Plain">connection</span><span class="p-Indicator">:</span>           <span class="l-Scalar-Plain">~</span>
        <span class="l-Scalar-Plain">cache</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span>                   <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>               <span class="l-Scalar-Plain">sf2_acl_</span>
        <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span>             <span class="l-Scalar-Plain">~</span>
        <span class="l-Scalar-Plain">tables</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span>                <span class="l-Scalar-Plain">acl_classes</span>
            <span class="l-Scalar-Plain">entry</span><span class="p-Indicator">:</span>                <span class="l-Scalar-Plain">acl_entries</span>
            <span class="l-Scalar-Plain">object_identity</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">acl_object_identities</span>
            <span class="l-Scalar-Plain">object_identity_ancestors</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">acl_object_identity_ancestors</span>
            <span class="l-Scalar-Plain">security_identity</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">acl_security_identities</span>
        <span class="l-Scalar-Plain">voter</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">allow_if_object_identity_unavailable</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">true</span>

    <span class="l-Scalar-Plain">encoders</span><span class="p-Indicator">:</span>
        <span class="c1"># Examples:</span>
        <span class="l-Scalar-Plain">Acme\DemoBundle\Entity\User1</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sha512</span>
        <span class="l-Scalar-Plain">Acme\DemoBundle\Entity\User2</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">algorithm</span><span class="p-Indicator">:</span>           <span class="l-Scalar-Plain">sha512</span>
            <span class="l-Scalar-Plain">encode_as_base64</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">true</span>
            <span class="l-Scalar-Plain">iterations</span><span class="p-Indicator">:</span>          <span class="l-Scalar-Plain">5000</span>

        <span class="c1"># PBKDF2 encoder</span>
        <span class="c1"># see the note about PBKDF2 below for details on security and speed</span>
        <span class="l-Scalar-Plain">Acme\Your\Class\Name</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">algorithm</span><span class="p-Indicator">:</span>            <span class="l-Scalar-Plain">pbkdf2</span>
            <span class="l-Scalar-Plain">hash_algorithm</span><span class="p-Indicator">:</span>       <span class="l-Scalar-Plain">sha512</span>
            <span class="l-Scalar-Plain">encode_as_base64</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">true</span>
            <span class="l-Scalar-Plain">iterations</span><span class="p-Indicator">:</span>           <span class="l-Scalar-Plain">1000</span>

        <span class="c1"># Example options/values for what a custom encoder might look like</span>
        <span class="l-Scalar-Plain">Acme\DemoBundle\Entity\User3</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span>                   <span class="l-Scalar-Plain">my.encoder.id</span>

    <span class="l-Scalar-Plain">providers</span><span class="p-Indicator">:</span>            <span class="c1"># Required</span>
        <span class="c1"># Examples:</span>
        <span class="l-Scalar-Plain">my_in_memory_provider</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">memory</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">users</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">foo</span><span class="p-Indicator">:</span>
                        <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span>           <span class="l-Scalar-Plain">foo</span>
                        <span class="l-Scalar-Plain">roles</span><span class="p-Indicator">:</span>              <span class="l-Scalar-Plain">ROLE_USER</span>
                    <span class="l-Scalar-Plain">bar</span><span class="p-Indicator">:</span>
                        <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span>           <span class="l-Scalar-Plain">bar</span>
                        <span class="l-Scalar-Plain">roles</span><span class="p-Indicator">:</span>              <span class="p-Indicator">[</span><span class="nv">ROLE_USER</span><span class="p-Indicator">,</span> <span class="nv">ROLE_ADMIN</span><span class="p-Indicator">]</span>

        <span class="l-Scalar-Plain">my_entity_provider</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">entity</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span>              <span class="l-Scalar-Plain">SecurityBundle:User</span>
                <span class="l-Scalar-Plain">property</span><span class="p-Indicator">:</span>           <span class="l-Scalar-Plain">username</span>
                <span class="l-Scalar-Plain">manager_name</span><span class="p-Indicator">:</span>       <span class="l-Scalar-Plain">~</span>

        <span class="c1"># Example custom provider</span>
        <span class="l-Scalar-Plain">my_some_custom_provider</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span>                   <span class="l-Scalar-Plain">~</span>

        <span class="c1"># Chain some providers</span>
        <span class="l-Scalar-Plain">my_chain_provider</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">chain</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">providers</span><span class="p-Indicator">:</span>          <span class="p-Indicator">[</span> <span class="nv">my_in_memory_provider</span><span class="p-Indicator">,</span> <span class="nv">my_entity_provider</span> <span class="p-Indicator">]</span>

    <span class="l-Scalar-Plain">firewalls</span><span class="p-Indicator">:</span>            <span class="c1"># Required</span>
        <span class="c1"># Examples:</span>
        <span class="l-Scalar-Plain">somename</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">.*</span>
            <span class="c1"># restrict the firewall to a specific host</span>
            <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">admin\.example\.com</span>
             <span class="l-Scalar-Plain"># restrict the firewall to specific http methods</span>
            <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">GET</span><span class="p-Indicator">,</span> <span class="nv">POST</span><span class="p-Indicator">]</span>
            <span class="l-Scalar-Plain">request_matcher</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some.service.id</span>
            <span class="l-Scalar-Plain">access_denied_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/foo/error403</span>
            <span class="l-Scalar-Plain">access_denied_handler</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some.service.id</span>
            <span class="l-Scalar-Plain">entry_point</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some.service.id</span>
            <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some_key_from_above</span>
            <span class="c1"># manages where each firewall stores session information</span>
            <span class="c1"># See &quot;Firewall Context&quot; below for more details</span>
            <span class="l-Scalar-Plain">context</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">context_key</span>
            <span class="l-Scalar-Plain">stateless</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
            <span class="l-Scalar-Plain">x509</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some_key_from_above</span>
            <span class="l-Scalar-Plain">http_basic</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some_key_from_above</span>
            <span class="l-Scalar-Plain">http_digest</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some_key_from_above</span>
            <span class="l-Scalar-Plain">form_login</span><span class="p-Indicator">:</span>
                <span class="c1"># submit the login form here</span>
                <span class="l-Scalar-Plain">check_path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/login_check</span>

                <span class="c1"># the user is redirected here when they need to log in</span>
                <span class="l-Scalar-Plain">login_path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/login</span>

                <span class="c1"># if true, forward the user to the login form instead of redirecting</span>
                <span class="l-Scalar-Plain">use_forward</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

                <span class="c1"># login success redirecting options (read further below)</span>
                <span class="l-Scalar-Plain">always_use_default_target_path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
                <span class="l-Scalar-Plain">default_target_path</span><span class="p-Indicator">:</span>            <span class="l-Scalar-Plain">/</span>
                <span class="l-Scalar-Plain">target_path_parameter</span><span class="p-Indicator">:</span>          <span class="l-Scalar-Plain">_target_path</span>
                <span class="l-Scalar-Plain">use_referer</span><span class="p-Indicator">:</span>                    <span class="l-Scalar-Plain">false</span>

                <span class="c1"># login failure redirecting options (read further below)</span>
                <span class="l-Scalar-Plain">failure_path</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">/foo</span>
                <span class="l-Scalar-Plain">failure_forward</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
                <span class="l-Scalar-Plain">failure_path_parameter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_failure_path</span>
                <span class="l-Scalar-Plain">failure_handler</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some.service.id</span>
                <span class="l-Scalar-Plain">success_handler</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some.service.id</span>

                <span class="c1"># field names for the username and password fields</span>
                <span class="l-Scalar-Plain">username_parameter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_username</span>
                <span class="l-Scalar-Plain">password_parameter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_password</span>

                <span class="c1"># csrf token options</span>
                <span class="l-Scalar-Plain">csrf_parameter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_csrf_token</span>
                <span class="l-Scalar-Plain">intention</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">authenticate</span>
                <span class="l-Scalar-Plain">csrf_provider</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">my.csrf_provider.id</span>

                <span class="c1"># by default, the login form *must* be a POST, not a GET</span>
                <span class="l-Scalar-Plain">post_only</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">true</span>
                <span class="l-Scalar-Plain">remember_me</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">false</span>

                <span class="c1"># by default, a session must exist before submitting an authentication request</span>
                <span class="c1"># if false, then Request::hasPreviousSession is not called during authentication</span>
                <span class="c1"># new in Symfony 2.3</span>
                <span class="l-Scalar-Plain">require_previous_session</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

            <span class="l-Scalar-Plain">remember_me</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">token_provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">name</span>
                <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">someS3cretKey</span>
                <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">NameOfTheCookie</span>
                <span class="l-Scalar-Plain">lifetime</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">3600</span> <span class="c1"># in seconds</span>
                <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/foo</span>
                <span class="l-Scalar-Plain">domain</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">somedomain.foo</span>
                <span class="l-Scalar-Plain">secure</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
                <span class="l-Scalar-Plain">httponly</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
                <span class="l-Scalar-Plain">always_remember_me</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
                <span class="l-Scalar-Plain">remember_me_parameter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_remember_me</span>
            <span class="l-Scalar-Plain">logout</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/logout</span>
                <span class="l-Scalar-Plain">target</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/</span>
                <span class="l-Scalar-Plain">invalidate_session</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
                <span class="l-Scalar-Plain">delete_cookies</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">a</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">null</span><span class="p-Indicator">,</span> <span class="nv">domain</span><span class="p-Indicator">:</span> <span class="nv">null</span> <span class="p-Indicator">}</span>
                    <span class="l-Scalar-Plain">b</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">path</span><span class="p-Indicator">:</span> <span class="nv">null</span><span class="p-Indicator">,</span> <span class="nv">domain</span><span class="p-Indicator">:</span> <span class="nv">null</span> <span class="p-Indicator">}</span>
                <span class="l-Scalar-Plain">handlers</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">some.service.id</span><span class="p-Indicator">,</span> <span class="nv">another.service.id</span><span class="p-Indicator">]</span>
                <span class="l-Scalar-Plain">success_handler</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">some.service.id</span>
            <span class="l-Scalar-Plain">anonymous</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>

        <span class="c1"># Default values and options for any firewall</span>
        <span class="l-Scalar-Plain">some_firewall_listener</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>              <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">security</span><span class="p-Indicator">:</span>             <span class="l-Scalar-Plain">true</span>
            <span class="l-Scalar-Plain">request_matcher</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">access_denied_url</span><span class="p-Indicator">:</span>    <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">access_denied_handler</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">entry_point</span><span class="p-Indicator">:</span>          <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span>             <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">stateless</span><span class="p-Indicator">:</span>            <span class="l-Scalar-Plain">false</span>
            <span class="l-Scalar-Plain">context</span><span class="p-Indicator">:</span>              <span class="l-Scalar-Plain">~</span>
            <span class="l-Scalar-Plain">logout</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">csrf_parameter</span><span class="p-Indicator">:</span>       <span class="l-Scalar-Plain">_csrf_token</span>
                <span class="l-Scalar-Plain">csrf_provider</span><span class="p-Indicator">:</span>        <span class="l-Scalar-Plain">~</span>
                <span class="l-Scalar-Plain">intention</span><span class="p-Indicator">:</span>            <span class="l-Scalar-Plain">logout</span>
                <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>                 <span class="l-Scalar-Plain">/logout</span>
                <span class="l-Scalar-Plain">target</span><span class="p-Indicator">:</span>               <span class="l-Scalar-Plain">/</span>
                <span class="l-Scalar-Plain">success_handler</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">~</span>
                <span class="l-Scalar-Plain">invalidate_session</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">true</span>
                <span class="l-Scalar-Plain">delete_cookies</span><span class="p-Indicator">:</span>

                    <span class="c1"># Prototype</span>
                    <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span>
                        <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>                 <span class="l-Scalar-Plain">~</span>
                        <span class="l-Scalar-Plain">domain</span><span class="p-Indicator">:</span>               <span class="l-Scalar-Plain">~</span>
                <span class="l-Scalar-Plain">handlers</span><span class="p-Indicator">:</span>             <span class="p-Indicator">[]</span>
            <span class="l-Scalar-Plain">anonymous</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span>                  <span class="l-Scalar-Plain">4f954a0667e01</span>
            <span class="l-Scalar-Plain">switch_user</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span>             <span class="l-Scalar-Plain">~</span>
                <span class="l-Scalar-Plain">parameter</span><span class="p-Indicator">:</span>            <span class="l-Scalar-Plain">_switch_user</span>
                <span class="l-Scalar-Plain">role</span><span class="p-Indicator">:</span>                 <span class="l-Scalar-Plain">ROLE_ALLOWED_TO_SWITCH</span>

    <span class="l-Scalar-Plain">access_control</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">requires_channel</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">~</span>

        <span class="c1"># use the urldecoded format</span>
        <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>                 <span class="l-Scalar-Plain">~</span> <span class="c1"># Example: ^/path to resource/</span>
        <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span>                 <span class="l-Scalar-Plain">~</span>
        <span class="l-Scalar-Plain">ip</span><span class="p-Indicator">:</span>                   <span class="l-Scalar-Plain">~</span>
        <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>              <span class="p-Indicator">[]</span>
        <span class="l-Scalar-Plain">roles</span><span class="p-Indicator">:</span>                <span class="p-Indicator">[]</span>
    <span class="l-Scalar-Plain">role_hierarchy</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">ROLE_ADMIN</span><span class="p-Indicator">:</span>      <span class="p-Indicator">[</span><span class="nv">ROLE_ORGANIZER</span><span class="p-Indicator">,</span> <span class="nv">ROLE_USER</span><span class="p-Indicator">]</span>
        <span class="l-Scalar-Plain">ROLE_SUPERADMIN</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">ROLE_ADMIN</span><span class="p-Indicator">]</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="form-login-configuration">
<span id="reference-security-firewall-form-login"></span><h2>Form Login Configuration<a class="headerlink" href="#form-login-configuration" title="Permalink to this headline">¶</a></h2>
<p>When using the <tt class="docutils literal"><span class="pre">form_login</span></tt> authentication listener beneath a firewall,
there are several common options for configuring the &#8220;form login&#8221; experience.</p>
<p>For even more details, see <a class="reference internal" href="../../cookbook/security/form_login.html"><em>How to customize your Form Login</em></a>.</p>
<div class="section" id="the-login-form-and-process">
<h3>The Login Form and Process<a class="headerlink" href="#the-login-form-and-process" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">login_path</span></tt> (type: <tt class="docutils literal"><span class="pre">string</span></tt>, default: <tt class="docutils literal"><span class="pre">/login</span></tt>)
This is the route or path that the user will be redirected to (unless
<tt class="docutils literal"><span class="pre">use_forward</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt>) when they try to access a
protected resource but isn&#8217;t fully authenticated.</p>
<p>This path <strong>must</strong> be accessible by a normal, un-authenticated user, else
you may create a redirect loop. For details, see
&#8220;<a class="reference internal" href="../../book/security.html#book-security-common-pitfalls"><em>Avoid Common Pitfalls</em></a>&#8221;.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">check_path</span></tt> (type: <tt class="docutils literal"><span class="pre">string</span></tt>, default: <tt class="docutils literal"><span class="pre">/login_check</span></tt>)
This is the route or path that your login form must submit to. The
firewall will intercept any requests (<tt class="docutils literal"><span class="pre">POST</span></tt> requests only, by default)
to this URL and process the submitted login credentials.</p>
<p>Be sure that this URL is covered by your main firewall (i.e. don&#8217;t create
a separate firewall just for <tt class="docutils literal"><span class="pre">check_path</span></tt> URL).</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">use_forward</span></tt> (type: <tt class="docutils literal"><span class="pre">Boolean</span></tt>, default: <tt class="docutils literal"><span class="pre">false</span></tt>)
If you&#8217;d like the user to be forwarded to the login form instead of being
redirected, set this option to <tt class="docutils literal"><span class="pre">true</span></tt>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">username_parameter</span></tt> (type: <tt class="docutils literal"><span class="pre">string</span></tt>, default: <tt class="docutils literal"><span class="pre">_username</span></tt>)
This is the field name that you should give to the username field of
your login form. When you submit the form to <tt class="docutils literal"><span class="pre">check_path</span></tt>, the security
system will look for a POST parameter with this name.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">password_parameter</span></tt> (type: <tt class="docutils literal"><span class="pre">string</span></tt>, default: <tt class="docutils literal"><span class="pre">_password</span></tt>)
This is the field name that you should give to the password field of
your login form. When you submit the form to <tt class="docutils literal"><span class="pre">check_path</span></tt>, the security
system will look for a POST parameter with this name.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">post_only</span></tt> (type: <tt class="docutils literal"><span class="pre">Boolean</span></tt>, default: <tt class="docutils literal"><span class="pre">true</span></tt>)
By default, you must submit your login form to the <tt class="docutils literal"><span class="pre">check_path</span></tt> URL
as a POST request. By setting this option to <tt class="docutils literal"><span class="pre">false</span></tt>, you can send a
GET request to the <tt class="docutils literal"><span class="pre">check_path</span></tt> URL.</p>
</li>
</ul>
</div>
<div class="section" id="redirecting-after-login">
<h3>Redirecting after Login<a class="headerlink" href="#redirecting-after-login" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">always_use_default_target_path</span></tt> (type: <tt class="docutils literal"><span class="pre">Boolean</span></tt>, default: <tt class="docutils literal"><span class="pre">false</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">default_target_path</span></tt> (type: <tt class="docutils literal"><span class="pre">string</span></tt>, default: <tt class="docutils literal"><span class="pre">/</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">target_path_parameter</span></tt> (type: <tt class="docutils literal"><span class="pre">string</span></tt>, default: <tt class="docutils literal"><span class="pre">_target_path</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">use_referer</span></tt> (type: <tt class="docutils literal"><span class="pre">Boolean</span></tt>, default: <tt class="docutils literal"><span class="pre">false</span></tt>)</li>
</ul>
</div>
</div>
<div class="section" id="using-the-pbkdf2-encoder-security-and-speed">
<span id="reference-security-pbkdf2"></span><h2>Using the PBKDF2 Encoder: Security and Speed<a class="headerlink" href="#using-the-pbkdf2-encoder-security-and-speed" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="http://en.wikipedia.org/wiki/PBKDF2">PBKDF2</a> encoder provides a high level of Cryptographic security, as
recommended by the National Institute of Standards and Technology (NIST).</p>
<p>You can see an example of the <tt class="docutils literal"><span class="pre">pbkdf2</span></tt> encoder in the YAML block on this page.</p>
<p>But using PBKDF2 also warrants a warning: using it (with a high number
of iterations) slows down the process. Thus, PBKDF2 should be used with
caution and care.</p>
<p>A good configuration lies around at least 1000 iterations and sha512
for the hash algorithm.</p>
</div>
<div class="section" id="using-the-bcrypt-password-encoder">
<span id="reference-security-bcrypt"></span><h2>Using the BCrypt Password Encoder<a class="headerlink" href="#using-the-bcrypt-password-encoder" title="Permalink to this headline">¶</a></h2>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">To use this encoder, you either need to use PHP Version 5.5 or install
the <a class="reference external" href="https://packagist.org/packages/ircmaxell/password-compat">ircmaxell/password-compat</a> library via Composer.</p>
</div>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/security.yml</span>
<span class="l-Scalar-Plain">security</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l-Scalar-Plain">encoders</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">Symfony\Component\Security\Core\User\User</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">algorithm</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">bcrypt</span>
            <span class="l-Scalar-Plain">cost</span><span class="p-Indicator">:</span>      <span class="l-Scalar-Plain">15</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/security.xml --&gt;</span>
<span class="nt">&lt;config&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;encoder</span>
        <span class="na">class=</span><span class="s">&quot;Symfony\Component\Security\Core\User\User&quot;</span>
        <span class="na">algorithm=</span><span class="s">&quot;bcrypt&quot;</span>
        <span class="na">cost=</span><span class="s">&quot;15&quot;</span>
    <span class="nt">/&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/security.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;security&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">// ...</span>
    <span class="s1">&#39;encoders&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;Symfony\Component\Security\Core\User\User&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;algorithm&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bcrypt&#39;</span><span class="p">,</span>
            <span class="s1">&#39;cost&#39;</span>      <span class="o">=&gt;</span> <span class="mi">15</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>The <tt class="docutils literal"><span class="pre">cost</span></tt> can be in the range of <tt class="docutils literal"><span class="pre">4-31</span></tt> and determines how long a password
will be encoded. Each increment of <tt class="docutils literal"><span class="pre">cost</span></tt> <em>doubles</em> the time it takes to
encode a password.</p>
<p>If you don&#8217;t provide the <tt class="docutils literal"><span class="pre">cost</span></tt> option, the default cost of <tt class="docutils literal"><span class="pre">13</span></tt> is used.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can change the cost at any time — even if you already have some
passwords encoded using a different cost. New passwords will be encoded
using the new cost, while the already encoded ones will be validated
using a cost that was used back when they were encoded.</p>
</div>
<p>A salt for each new password is generated automatically and need not be
persisted. Since an encoded password contains the salt used to encode it,
persisting the encoded password alone is enough.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All the encoded passwords are <tt class="docutils literal"><span class="pre">60</span></tt> characters long, so make sure to
allocate enough space for them to be persisted.</p>
</div>
</div>
<div class="section" id="firewall-context">
<span id="reference-security-firewall-context"></span><h2>Firewall Context<a class="headerlink" href="#firewall-context" title="Permalink to this headline">¶</a></h2>
<p>Most applications will only need one <a class="reference internal" href="../../book/security.html#book-security-firewalls"><em>firewall</em></a>.
But if your application <em>does</em> use multiple firewalls, you&#8217;ll notice that
if you&#8217;re authenticated in one firewall, you&#8217;re not automatically authenticated
in another. In other words, the systems don&#8217;t share a common &#8220;context&#8221;: each
firewall acts like a separate security system.</p>
<p>However, each firewall has an optional <tt class="docutils literal"><span class="pre">context</span></tt> key (which defaults to
the name of the firewall), which is used when storing and retrieving security
data to and from the session. If this key were set to the same value across
multiple firewalls, the &#8220;context&#8221; could actually be shared:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/security.yml</span>
<span class="l-Scalar-Plain">security</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>

    <span class="l-Scalar-Plain">firewalls</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">somename</span><span class="p-Indicator">:</span>
            <span class="c1"># ...</span>
            <span class="l-Scalar-Plain">context</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my_context</span>
        <span class="l-Scalar-Plain">othername</span><span class="p-Indicator">:</span>
            <span class="c1"># ...</span>
            <span class="l-Scalar-Plain">context</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my_context</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/security.xml --&gt;</span>
<span class="nt">&lt;security:config&gt;</span>
   <span class="nt">&lt;firewall</span> <span class="na">name=</span><span class="s">&quot;somename&quot;</span> <span class="na">context=</span><span class="s">&quot;my_context&quot;</span><span class="nt">&gt;</span>
     <span class="cp">&lt;! ... -&gt;</span>
   <span class="nt">&lt;/firewall&gt;</span>
   <span class="nt">&lt;firewall</span> <span class="na">name=</span><span class="s">&quot;othername&quot;</span> <span class="na">context=</span><span class="s">&quot;my_context&quot;</span><span class="nt">&gt;</span>
     <span class="cp">&lt;! ... -&gt;</span>
   <span class="nt">&lt;/firewall&gt;</span>
<span class="nt">&lt;/security:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/security.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;security&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
     <span class="s1">&#39;firewalls&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
         <span class="s1">&#39;somename&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
             <span class="c1">// ...</span>
             <span class="s1">&#39;context&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_context&#39;</span>
         <span class="p">),</span>
         <span class="s1">&#39;othername&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
             <span class="c1">// ...</span>
             <span class="s1">&#39;context&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_context&#39;</span>
         <span class="p">),</span>
     <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="http-digest-authentication">
<h2>HTTP-Digest Authentication<a class="headerlink" href="#http-digest-authentication" title="Permalink to this headline">¶</a></h2>
<p>To use HTTP-Digest authentication you need to provide a realm and a key:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/security.yml</span>
<span class="l-Scalar-Plain">security</span><span class="p-Indicator">:</span>
   <span class="l-Scalar-Plain">firewalls</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">somename</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">http_digest</span><span class="p-Indicator">:</span>
         <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&quot;a_random_string&quot;</span>
         <span class="l-Scalar-Plain">realm</span><span class="p-Indicator">:</span> <span class="s">&quot;secure-api&quot;</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/security.xml --&gt;</span>
<span class="nt">&lt;security:config&gt;</span>
   <span class="nt">&lt;firewall</span> <span class="na">name=</span><span class="s">&quot;somename&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;http-digest</span> <span class="na">key=</span><span class="s">&quot;a_random_string&quot;</span> <span class="na">realm=</span><span class="s">&quot;secure-api&quot;</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/firewall&gt;</span>
<span class="nt">&lt;/security:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/security.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;security&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
     <span class="s1">&#39;firewalls&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
         <span class="s1">&#39;somename&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
             <span class="s1">&#39;http_digest&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                 <span class="s1">&#39;key&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;a_random_string&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;realm&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;secure-api&#39;</span><span class="p">,</span>
             <span class="p">),</span>
         <span class="p">),</span>
     <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SecurityBundle Configuration (&#8220;security&#8221;)</a><ul>
<li><a class="reference internal" href="#full-default-configuration">Full default Configuration</a></li>
<li><a class="reference internal" href="#form-login-configuration">Form Login Configuration</a><ul>
<li><a class="reference internal" href="#the-login-form-and-process">The Login Form and Process</a></li>
<li><a class="reference internal" href="#redirecting-after-login">Redirecting after Login</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-pbkdf2-encoder-security-and-speed">Using the PBKDF2 Encoder: Security and Speed</a></li>
<li><a class="reference internal" href="#using-the-bcrypt-password-encoder">Using the BCrypt Password Encoder</a></li>
<li><a class="reference internal" href="#firewall-context">Firewall Context</a></li>
<li><a class="reference internal" href="#http-digest-authentication">HTTP-Digest Authentication</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="doctrine.html"
                        title="previous chapter">DoctrineBundle Configuration (&#8220;doctrine&#8221;)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="assetic.html"
                        title="next chapter">AsseticBundle Configuration (&#8220;assetic&#8221;)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/reference/configuration/security.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="assetic.html" title="AsseticBundle Configuration (“assetic”)"
             >next</a> |</li>
        <li class="right" >
          <a href="doctrine.html" title="DoctrineBundle Configuration (“doctrine”)"
             >previous</a> |</li>
        <li><a href="../../index.html">Symfony2 Framework Documentation  documentation</a> &raquo;</li>
          <li><a href="../index.html" >Reference Documents</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>