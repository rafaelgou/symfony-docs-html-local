

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Validation &mdash; Symfony2Docs v1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Symfony2Docs v1 documentation" href="../index.html" />
    <link rel="up" title="Book" href="index.html" />
    <link rel="next" title="Forms" href="forms.html" />
    <link rel="prev" title="Testing" href="testing.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="forms.html" title="Forms"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="testing.html" title="Testing"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs v1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Book</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="validation">
<span id="index-0"></span><h1>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h1>
<p>Validation is a very common task in web applications. Data entered in forms
needs to be validated. Data also needs to be validated before it is written
into a database or passed to a web service.</p>
<p>Symfony2 ships with a <a class="reference external" href="https://github.com/symfony/Validator">Validator</a> component that makes this task easy and transparent.
This component is based on the <a class="reference external" href="http://jcp.org/en/jsr/detail?id=303">JSR303 Bean Validation specification</a>. What?
A Java specification in PHP? You heard right, but it&#8217;s not as bad as it sounds.
Let&#8217;s look at how it can be used in PHP.</p>
<div class="section" id="the-basics-of-validation">
<h2>The Basics of Validation<a class="headerlink" href="#the-basics-of-validation" title="Permalink to this headline">¶</a></h2>
<p>The best way to understand validation is to see it in action. To start, suppose
you&#8217;ve created a plain-old-PHP object that you need to use somewhere in
your application:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="x">namespace Acme\BlogBundle\Entity;</span>

<span class="x">class Author</span>
<span class="x">{</span>
<span class="x">    public $name;</span>
<span class="x">}</span>
</pre></div>
</div>
<p>So far, this is just an ordinary class that serves some purpose inside your
application. The goal of validation is to tell you whether or not the data
of an object is valid. For this to work, you&#8217;ll configure a list of rules
(called <a class="reference internal" href="#validation-constraints"><em>constraints</em></a>) that the object must
follow in order to be valid. These rules can be specified via a number of
different formats (YAML, XML, annotations, or PHP).</p>
<p>For example, to guarantee that the <tt class="docutils literal"><span class="pre">$name</span></tt> property is not empty, add the
following:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><pre>// src/Acme/BlogBundle/Entity/Author.php
use Symfony\Component\Validator\Constraints as Assert;

class Author
{
    /**
     * @Assert\NotBlank()
     */
    public $name;
}</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/Author.php</span>

<span class="x">use Symfony\Component\Validator\Mapping\ClassMetadata;</span>
<span class="x">use Symfony\Component\Validator\Constraints\NotBlank;</span>

<span class="x">class Author</span>
<span class="x">{</span>
<span class="x">    public $name;</span>

<span class="x">    public static function loadValidatorMetadata(ClassMetadata $metadata)</span>
<span class="x">    {</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;name&#39;, new NotBlank());</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Protected and private properties can also be validated, as well as &#8220;getter&#8221;
methods (see <cite>validator-constraint-targets</cite>).</p>
</div>
<div class="section" id="using-the-validator-service">
<span id="index-1"></span><h3>Using the <tt class="docutils literal"><span class="pre">validator</span></tt> Service<a class="headerlink" href="#using-the-validator-service" title="Permalink to this headline">¶</a></h3>
<p>Next, to actually validate an <tt class="docutils literal"><span class="pre">Author</span></tt> object, use the <tt class="docutils literal"><span class="pre">validate</span></tt> method
on the <tt class="docutils literal"><span class="pre">validator</span></tt> service (class <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Component\Validator\Validator</span></tt>).
The job of the <tt class="docutils literal"><span class="pre">validator</span></tt> is easy: to read the constraints (i.e. rules)
of a class and verify whether or not the data on the object satisfies those
constraints. If validation fails, an array of errors is returned. Take this
simple example from inside a controller:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">use Symfony\Component\HttpFoundation\Response;</span>
<span class="x">use Acme\BlogBundle\Entity\Author;</span>
<span class="x">// ...</span>

<span class="x">public function indexAction()</span>
<span class="x">{</span>
<span class="x">    $author = new Author();</span>
<span class="x">    // ... do something to the $author object</span>

<span class="x">    $validator = $this-&gt;get(&#39;validator&#39;);</span>
<span class="x">    $errors = $validator-&gt;validate($author);</span>

<span class="x">    if (count($errors) &gt; 0) {</span>
<span class="x">        return new Response(print_r($errors, true));</span>
<span class="x">    } else {</span>
<span class="x">        return new Response(&#39;The author is valid! Yes!&#39;);</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
<p>If the <tt class="docutils literal"><span class="pre">$name</span></tt> property is empty, you will see the following error
message:</p>
<div class="highlight-text"><div class="highlight"><pre>Acme\BlogBundle\Author.name:
    This value should not be blank
</pre></div>
</div>
<p>If you insert a value into the <tt class="docutils literal"><span class="pre">name</span></tt> property, the happy success message
will appear.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Most of the time, you won&#8217;t interact directly with the <tt class="docutils literal"><span class="pre">validator</span></tt>
service or need to worry about printing out the errors. Most of the time,
you&#8217;ll use validation indirectly when handling submitted form data. For
more information, see the <a class="reference internal" href="#book-validation-forms"><em>Validation and Forms</em></a>.</p>
</div>
<p>You could also pass the collection of errors into a template.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">if (count($errors) &gt; 0) {</span>
<span class="x">    return $this-&gt;render(&#39;AcmeBlogBundle:Author:validate.html.twig&#39;, array(</span>
<span class="x">        &#39;errors&#39; =&gt; $errors,</span>
<span class="x">    ));</span>
<span class="x">} else {</span>
<span class="x">    // ...</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Inside the template, you can output the list of errors exactly as needed:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# src/Acme/BlogBundle/Resources/views/Author/validate.html.twig #}</span>

<span class="nt">&lt;h3&gt;</span>The author has the following errors<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">error</span> <span class="k">in</span> <span class="nv">errors</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">error.message</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/views/Author/validate.html.php --&gt;</span>

<span class="nt">&lt;h3&gt;</span>The author has the following errors<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$error</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each validation error (called a &#8220;constraint violation&#8221;), is represented by
a <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Component\Validator\ConstraintViolation</span></tt> object.</p>
</div>
</div>
<div class="section" id="validation-and-forms">
<span id="book-validation-forms"></span><span id="index-2"></span><h3>Validation and Forms<a class="headerlink" href="#validation-and-forms" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">validator</span></tt> service can be used at any time to validate any object.
In reality, however, you&#8217;ll usually work with the <tt class="docutils literal"><span class="pre">validator</span></tt> indirectly
when working with forms. Symfony&#8217;s form library uses the <tt class="docutils literal"><span class="pre">validator</span></tt> service
internally to validate the underlying object after values have been submitted
and bound. The constraint violations on the object are converted into <tt class="docutils literal"><span class="pre">FieldError</span></tt>
objects that can easily be displayed with your form. The typical form submission
workflow looks like the following from inside a controller:</p>
<div class="highlight-python"><pre>use Acme\BlogBundle\Entity\Author;
use Acme\BlogBundle\Form\AuthorType;
use Symfony\Component\HttpFoundation\Request;
// ...

public function updateAction(Request $request)
{
    $author = new Acme\BlogBundle\Entity\Author();
    $form = $this-&gt;createForm(new AuthorType(), $author);

    if ($request-&gt;getMethod() == 'POST') {
        $form-&gt;bindRequest($request);

        if ($form-&gt;isValid()) {
            // the validation passed, do something with the $author object

            return $this-&gt;redirect($this-&gt;generateUrl('...'));
        }
    }

    return $this-&gt;render('BlogBundle:Author:form.html.twig', array(
        'form' =&gt; $form-&gt;createView(),
    ));
}</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example uses an <tt class="docutils literal"><span class="pre">AuthorType</span></tt> form class, which is not shown here.</p>
</div>
<p>For more information, see the <a class="reference internal" href="forms.html"><em>Forms</em></a> chapter.</p>
</div>
</div>
<div class="section" id="configuration">
<span id="book-validation-configuration"></span><span id="index-3"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The Symfony2 validator is enabled by default, but you must explicitly enable
annotations if you&#8217;re using the annotation method to specify your constraints:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">validation</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">enable_annotations</span><span class="p-Indicator">:</span> <span class="nv">true</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:validation</span> <span class="na">enable_annotations=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/config.php</span>
<span class="x">$container-&gt;loadFromExtension(&#39;framework&#39;, array(&#39;validation&#39; =&gt; array(</span>
<span class="x">    &#39;enable_annotations&#39; =&gt; true,</span>
<span class="x">)));</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="constraints">
<span id="validation-constraints"></span><span id="index-4"></span><h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">validator</span></tt> is designed to validate objects against <em>constraints</em> (i.e.
rules). In order to validate an object, simply map one or more constraints
to its class and then pass it to the <tt class="docutils literal"><span class="pre">validator</span></tt> service.</p>
<p>Behind the scenes, a constraint is simply a PHP object that makes an assertive
statement. In real life, a constraint could be: &#8220;The cake must not be burned&#8221;.
In Symfony2, constraints are similar: they are assertions that a condition
is true. Given a value, a constraint will tell you whether or not that value
adheres to the rules of the constraint.</p>
<div class="section" id="supported-constraints">
<h3>Supported Constraints<a class="headerlink" href="#supported-constraints" title="Permalink to this headline">¶</a></h3>
<p>Symfony2 packages a large number of the most commonly-needed constraints:</p>
</div>
<div class="section" id="basic-constraints">
<h3>Basic Constraints<a class="headerlink" href="#basic-constraints" title="Permalink to this headline">¶</a></h3>
<p>These are the basic constraints: use them to assert very basic things about
the value of properties or the return value of methods on your object.</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/NotBlank.html"><em>NotBlank</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Blank.html"><em>Blank</em></a></li>
<li><a class="reference internal" href="../reference/constraints/NotNull.html"><em>NotNull</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Null.html"><em>Null</em></a></li>
<li><a class="reference internal" href="../reference/constraints/True.html"><em>True</em></a></li>
<li><a class="reference internal" href="../reference/constraints/False.html"><em>False</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Type.html"><em>Type</em></a></li>
</ul>
</div>
<div class="section" id="string-constraints">
<h3>String Constraints<a class="headerlink" href="#string-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/Email.html"><em>Email</em></a></li>
<li><a class="reference internal" href="../reference/constraints/MinLength.html"><em>MinLength</em></a></li>
<li><a class="reference internal" href="../reference/constraints/MaxLength.html"><em>MaxLength</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Url.html"><em>Url</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Regex.html"><em>Regex</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Ip.html"><em>Ip</em></a></li>
</ul>
</div>
<div class="section" id="number-constraints">
<h3>Number Constraints<a class="headerlink" href="#number-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/Max.html"><em>Max</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Min.html"><em>Min</em></a></li>
</ul>
</div>
<div class="section" id="date-constraints">
<h3>Date Constraints<a class="headerlink" href="#date-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/Date.html"><em>Date</em></a></li>
<li><a class="reference internal" href="../reference/constraints/DateTime.html"><em>DateTime</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Time.html"><em>Time</em></a></li>
</ul>
</div>
<div class="section" id="collection-constraints">
<h3>Collection Constraints<a class="headerlink" href="#collection-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/Choice.html"><em>Choice</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Collection.html"><em>Collection</em></a></li>
<li><a class="reference internal" href="../reference/constraints/UniqueEntity.html"><em>UniqueEntity</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Language.html"><em>Language</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Locale.html"><em>Locale</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Country.html"><em>Country</em></a></li>
</ul>
</div>
<div class="section" id="file-constraints">
<h3>File Constraints<a class="headerlink" href="#file-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/File.html"><em>File</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Image.html"><em>Image</em></a></li>
</ul>
</div>
<div class="section" id="other-constraints">
<h3>Other Constraints<a class="headerlink" href="#other-constraints" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../reference/constraints/Callback.html"><em>Callback</em></a></li>
<li><a class="reference internal" href="../reference/constraints/All.html"><em>All</em></a></li>
<li><a class="reference internal" href="../reference/constraints/UserPassword.html"><em>UserPassword</em></a></li>
<li><a class="reference internal" href="../reference/constraints/Valid.html"><em>Valid</em></a></li>
</ul>
<p>You can also create your own custom constraints. This topic is covered in
the &#8220;<a class="reference internal" href="../cookbook/validation/custom_constraint.html"><em>How to create a Custom Validation Constraint</em></a>&#8221; article of the cookbook.</p>
</div>
<div class="section" id="constraint-configuration">
<span id="book-validation-constraint-configuration"></span><span id="index-5"></span><h3>Constraint Configuration<a class="headerlink" href="#constraint-configuration" title="Permalink to this headline">¶</a></h3>
<p>Some constraints, like <a class="reference internal" href="../reference/constraints/NotBlank.html"><em>NotBlank</em></a>,
are simple whereas others, like the <a class="reference internal" href="../reference/constraints/Choice.html"><em>Choice</em></a>
constraint, have several configuration options available. Suppose that the
<tt class="docutils literal"><span class="pre">Author</span></tt> class has another property, <tt class="docutils literal"><span class="pre">gender</span></tt> that can be set to either
&#8220;male&#8221; or &#8220;female&#8221;:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">gender</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Choice</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">choices</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">male</span><span class="p-Indicator">,</span> <span class="nv">female</span><span class="p-Indicator">],</span> <span class="nv">message</span><span class="p-Indicator">:</span> <span class="nv">Choose a valid gender.</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><pre>// src/Acme/BlogBundle/Entity/Author.php
use Symfony\Component\Validator\Constraints as Assert;

class Author
{
    /**
     * @Assert\Choice(
     *     choices = { "male", "female" },
     *     message = "Choose a valid gender."
     * )
     */
    public $gender;
}</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;gender&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Choice&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;choices&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;value&gt;</span>male<span class="nt">&lt;/value&gt;</span>
                    <span class="nt">&lt;value&gt;</span>female<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>Choose a valid gender.<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="x">use Symfony\Component\Validator\Mapping\ClassMetadata;</span>
<span class="x">use Symfony\Component\Validator\Constraints\NotBlank;</span>

<span class="x">class Author</span>
<span class="x">{</span>
<span class="x">    public $gender;</span>

<span class="x">    public static function loadValidatorMetadata(ClassMetadata $metadata)</span>
<span class="x">    {</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;gender&#39;, new Choice(array(</span>
<span class="x">            &#39;choices&#39; =&gt; array(&#39;male&#39;, &#39;female&#39;),</span>
<span class="x">            &#39;message&#39; =&gt; &#39;Choose a valid gender.&#39;,</span>
<span class="x">        )));</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p id="validation-default-option">The options of a constraint can always be passed in as an array. Some constraints,
however, also allow you to pass the value of one, &#8220;<em>default</em>&#8221;, option in place
of the array. In the case of the <tt class="docutils literal"><span class="pre">Choice</span></tt> constraint, the <tt class="docutils literal"><span class="pre">choices</span></tt>
options can be specified in this way.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">gender</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Choice</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">male</span><span class="p-Indicator">,</span> <span class="nv">female</span><span class="p-Indicator">]</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><pre>// src/Acme/BlogBundle/Entity/Author.php
use Symfony\Component\Validator\Constraints as Assert;

class Author
{
    /**
     * @Assert\Choice({"male", "female"})
     */
    protected $gender;
}</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;gender&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Choice&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>male<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;value&gt;</span>female<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="x">use Symfony\Component\Validator\Mapping\ClassMetadata;</span>
<span class="x">use Symfony\Component\Validator\Constraints\Choice;</span>

<span class="x">class Author</span>
<span class="x">{</span>
<span class="x">    protected $gender;</span>

<span class="x">    public static function loadValidatorMetadata(ClassMetadata $metadata)</span>
<span class="x">    {</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;gender&#39;, new Choice(array(&#39;male&#39;, &#39;female&#39;)));</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>This is purely meant to make the configuration of the most common option of
a constraint shorter and quicker.</p>
<p>If you&#8217;re ever unsure of how to specify an option, either check the API documentation
for the constraint or play it safe by always passing in an array of options
(the first method shown above).</p>
</div>
</div>
<div class="section" id="constraint-targets">
<span id="validator-constraint-targets"></span><span id="index-6"></span><h2>Constraint Targets<a class="headerlink" href="#constraint-targets" title="Permalink to this headline">¶</a></h2>
<p>Constraints can be applied to a class property (e.g. <tt class="docutils literal"><span class="pre">name</span></tt>) or a public
getter method (e.g. <tt class="docutils literal"><span class="pre">getFullName</span></tt>). The first is the most common and easy
to use, but the second allows you to specify more complex validation rules.</p>
<div class="section" id="properties">
<span id="validation-property-target"></span><span id="index-7"></span><h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<p>Validating class properties is the most basic validation technique. Symfony2
allows you to validate private, protected or public properties. The next
listing shows you how to configure the <tt class="docutils literal"><span class="pre">$firstName</span></tt> property of an <tt class="docutils literal"><span class="pre">Author</span></tt>
class to have at least 3 characters.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">firstName</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">~</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">MinLength</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">3</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><pre>// Acme/BlogBundle/Entity/Author.php
use Symfony\Component\Validator\Constraints as Assert;

class Author
{
    /**
     * @Assert\NotBlank()
     * @Assert\MinLength(3)
     */
    private $firstName;
}</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;firstName&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;MinLength&quot;</span><span class="nt">&gt;</span>3<span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/class&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="x">use Symfony\Component\Validator\Mapping\ClassMetadata;</span>
<span class="x">use Symfony\Component\Validator\Constraints\NotBlank;</span>
<span class="x">use Symfony\Component\Validator\Constraints\MinLength;</span>

<span class="x">class Author</span>
<span class="x">{</span>
<span class="x">    private $firstName;</span>

<span class="x">    public static function loadValidatorMetadata(ClassMetadata $metadata)</span>
<span class="x">    {</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;firstName&#39;, new NotBlank());</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;firstName&#39;, new MinLength(3));</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="getters">
<span id="index-8"></span><h3>Getters<a class="headerlink" href="#getters" title="Permalink to this headline">¶</a></h3>
<p>Constraints can also be applied to the return value of a method. Symfony2
allows you to add a constraint to any public method whose name starts with
&#8220;get&#8221; or &#8220;is&#8221;. In this guide, both of these types of methods are referred
to as &#8220;getters&#8221;.</p>
<p>The benefit of this technique is that it allows you to validate your object
dynamically. For example, suppose you want to make sure that a password field
doesn&#8217;t match the first name of the user (for security reasons). You can
do this by creating an <tt class="docutils literal"><span class="pre">isPasswordLegal</span></tt> method, and then asserting that
this method must return <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">getters</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">passwordLegal</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="s">&quot;True&quot;</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">message</span><span class="p-Indicator">:</span> <span class="s">&quot;The</span><span class="nv"> </span><span class="s">password</span><span class="nv"> </span><span class="s">cannot</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">name&quot;</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><pre>// src/Acme/BlogBundle/Entity/Author.php
use Symfony\Component\Validator\Constraints as Assert;

class Author
{
    /**
     * @Assert\True(message = "The password cannot match your first name")
     */
    public function isPasswordLegal()
    {
        // return true or false
    }
}</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;getter</span> <span class="na">property=</span><span class="s">&quot;passwordLegal&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;True&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>The password cannot match your first name<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/getter&gt;</span>
<span class="nt">&lt;/class&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="x">use Symfony\Component\Validator\Mapping\ClassMetadata;</span>
<span class="x">use Symfony\Component\Validator\Constraints\True;</span>

<span class="x">class Author</span>
<span class="x">{</span>
<span class="x">    public static function loadValidatorMetadata(ClassMetadata $metadata)</span>
<span class="x">    {</span>
<span class="x">        $metadata-&gt;addGetterConstraint(&#39;passwordLegal&#39;, new True(array(</span>
<span class="x">            &#39;message&#39; =&gt; &#39;The password cannot match your first name&#39;,</span>
<span class="x">        )));</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Now, create the <tt class="docutils literal"><span class="pre">isPasswordLegal()</span></tt> method, and include the logic you need:</p>
<div class="highlight-python"><pre>public function isPasswordLegal()
{
    return ($this-&gt;firstName != $this-&gt;password);
}</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The keen-eyed among you will have noticed that the prefix of the getter
(&#8220;get&#8221; or &#8220;is&#8221;) is omitted in the mapping. This allows you to move the
constraint to a property with the same name later (or vice versa) without
changing your validation logic.</p>
</div>
</div>
<div class="section" id="classes">
<span id="validation-class-target"></span><h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<p>Some constraints apply to the entire class being validated. For example,
the <a class="reference internal" href="../reference/constraints/Callback.html"><em>Callback</em></a> constraint is a generic
constraint that&#8217;s applied to the class itself. When that class is validated,
methods specified by that constraint are simply executed so that each can
provide more custom validation.</p>
</div>
</div>
<div class="section" id="validation-groups">
<span id="book-validation-validation-groups"></span><h2>Validation Groups<a class="headerlink" href="#validation-groups" title="Permalink to this headline">¶</a></h2>
<p>So far, you&#8217;ve been able to add constraints to a class and ask whether or
not that class passes all of the defined constraints. In some cases, however,
you&#8217;ll need to validate an object against only <em>some</em> of the constraints
on that class. To do this, you can organize each constraint into one or more
&#8220;validation groups&#8221;, and then apply validation against just one group of
constraints.</p>
<p>For example, suppose you have a <tt class="docutils literal"><span class="pre">User</span></tt> class, which is used both when a
user registers and when a user updates his/her contact information later:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\User</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">email</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Email</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">groups</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">registration</span><span class="p-Indicator">]</span> <span class="p-Indicator">}</span>
        <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">groups</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">registration</span><span class="p-Indicator">]</span> <span class="p-Indicator">}</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">MinLength</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">limit</span><span class="p-Indicator">:</span> <span class="nv">7</span><span class="p-Indicator">,</span> <span class="nv">groups</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">registration</span><span class="p-Indicator">]</span> <span class="p-Indicator">}</span>
        <span class="l-Scalar-Plain">city</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">MinLength</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><pre>// src/Acme/BlogBundle/Entity/User.php
namespace Acme\BlogBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Validator\Constraints as Assert;

class User implements UserInterface
{
    /**
    * @Assert\Email(groups={"registration"})
    */
    private $email;

    /**
    * @Assert\NotBlank(groups={"registration"})
    * @Assert\MinLength(limit=7, groups={"registration"})
    */
    private $password;

    /**
    * @Assert\MinLength(2)
    */
    private $city;
}</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\User&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;email&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;groups&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>registration<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;groups&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>registration<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;MinLength&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;limit&quot;</span><span class="nt">&gt;</span>7<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;groups&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>registration<span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;city&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;MinLength&quot;</span><span class="nt">&gt;</span>7<span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/class&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/BlogBundle/Entity/User.php</span>
<span class="x">namespace Acme\BlogBundle\Entity;</span>

<span class="x">use Symfony\Component\Validator\Mapping\ClassMetadata;</span>
<span class="x">use Symfony\Component\Validator\Constraints\Email;</span>
<span class="x">use Symfony\Component\Validator\Constraints\NotBlank;</span>
<span class="x">use Symfony\Component\Validator\Constraints\MinLength;</span>

<span class="x">class User</span>
<span class="x">{</span>
<span class="x">    public static function loadValidatorMetadata(ClassMetadata $metadata)</span>
<span class="x">    {</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;email&#39;, new Email(array(</span>
<span class="x">            &#39;groups&#39; =&gt; array(&#39;registration&#39;)</span>
<span class="x">        )));</span>

<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;password&#39;, new NotBlank(array(</span>
<span class="x">            &#39;groups&#39; =&gt; array(&#39;registration&#39;)</span>
<span class="x">        )));</span>
<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;password&#39;, new MinLength(array(</span>
<span class="x">            &#39;limit&#39;  =&gt; 7,</span>
<span class="x">            &#39;groups&#39; =&gt; array(&#39;registration&#39;)</span>
<span class="x">        )));</span>

<span class="x">        $metadata-&gt;addPropertyConstraint(&#39;city&#39;, new MinLength(3));</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>With this configuration, there are two validation groups:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Default</span></tt> - contains the constraints not assigned to any other group;</li>
<li><tt class="docutils literal"><span class="pre">registration</span></tt> - contains the constraints on the <tt class="docutils literal"><span class="pre">email</span></tt> and <tt class="docutils literal"><span class="pre">password</span></tt>
fields only.</li>
</ul>
<p>To tell the validator to use a specific group, pass one or more group names
as the second argument to the <tt class="docutils literal"><span class="pre">validate()</span></tt> method:</p>
<div class="highlight-python"><pre>$errors = $validator-&gt;validate($author, array('registration'));</pre>
</div>
<p>Of course, you&#8217;ll usually work with validation indirectly through the form
library. For information on how to use validation groups inside forms, see
<a class="reference internal" href="forms.html#book-forms-validation-groups"><em>Validation Groups</em></a>.</p>
</div>
<div class="section" id="validating-values-and-arrays">
<span id="book-validation-raw-values"></span><span id="index-9"></span><h2>Validating Values and Arrays<a class="headerlink" href="#validating-values-and-arrays" title="Permalink to this headline">¶</a></h2>
<p>So far, you&#8217;ve seen how you can validate entire objects. But sometimes, you
just want to validate a simple value - like to verify that a string is a valid
email address. This is actually pretty easy to do. From inside a controller,
it looks like this:</p>
<div class="highlight-python"><pre>// add this to the top of your class
use Symfony\Component\Validator\Constraints\Email;

public function addEmailAction($email)
{
    $emailConstraint = new Email();
    // all constraint "options" can be set this way
    $emailConstraint-&gt;message = 'Invalid email address';

    // use the validator to validate the value
    $errorList = $this-&gt;get('validator')-&gt;validateValue($email, $emailConstraint);

    if (count($errorList) == 0) {
        // this IS a valid email address, do something
    } else {
        // this is *not* a valid email address
        $errorMessage = $errorList[0]-&gt;getMessage()

        // do something with the error
    }

    // ...
}</pre>
</div>
<p>By calling <tt class="docutils literal"><span class="pre">validateValue</span></tt> on the validator, you can pass in a raw value and
the constraint object that you want to validate that value against. A full
list of the available constraints - as well as the full class name for each
constraint - is available in the <a class="reference internal" href="../reference/constraints.html"><em>constraints reference</em></a>
section .</p>
<p>The <tt class="docutils literal"><span class="pre">validateValue</span></tt> method returns a <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Component\Validator\ConstraintViolationList</span></tt>
object, which acts just like an array of errors. Each error in the collection
is a <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Component\Validator\ConstraintViolation</span></tt> object,
which holds the error message on its <cite>getMessage</cite> method.</p>
</div>
<div class="section" id="final-thoughts">
<h2>Final Thoughts<a class="headerlink" href="#final-thoughts" title="Permalink to this headline">¶</a></h2>
<p>The Symfony2 <tt class="docutils literal"><span class="pre">validator</span></tt> is a powerful tool that can be leveraged to
guarantee that the data of any object is &#8220;valid&#8221;. The power behind validation
lies in &#8220;constraints&#8221;, which are rules that you can apply to properties or
getter methods of your object. And while you&#8217;ll most commonly use the validation
framework indirectly when using forms, remember that it can be used anywhere
to validate any object.</p>
</div>
<div class="section" id="learn-more-from-the-cookbook">
<h2>Learn more from the Cookbook<a class="headerlink" href="#learn-more-from-the-cookbook" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../cookbook/validation/custom_constraint.html"><em>How to create a Custom Validation Constraint</em></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Validation</a><ul>
<li><a class="reference internal" href="#the-basics-of-validation">The Basics of Validation</a><ul>
<li><a class="reference internal" href="#using-the-validator-service">Using the <tt class="docutils literal"><span class="pre">validator</span></tt> Service</a></li>
<li><a class="reference internal" href="#validation-and-forms">Validation and Forms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#constraints">Constraints</a><ul>
<li><a class="reference internal" href="#supported-constraints">Supported Constraints</a></li>
<li><a class="reference internal" href="#basic-constraints">Basic Constraints</a></li>
<li><a class="reference internal" href="#string-constraints">String Constraints</a></li>
<li><a class="reference internal" href="#number-constraints">Number Constraints</a></li>
<li><a class="reference internal" href="#date-constraints">Date Constraints</a></li>
<li><a class="reference internal" href="#collection-constraints">Collection Constraints</a></li>
<li><a class="reference internal" href="#file-constraints">File Constraints</a></li>
<li><a class="reference internal" href="#other-constraints">Other Constraints</a></li>
<li><a class="reference internal" href="#constraint-configuration">Constraint Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constraint-targets">Constraint Targets</a><ul>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#getters">Getters</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validation-groups">Validation Groups</a></li>
<li><a class="reference internal" href="#validating-values-and-arrays">Validating Values and Arrays</a></li>
<li><a class="reference internal" href="#final-thoughts">Final Thoughts</a></li>
<li><a class="reference internal" href="#learn-more-from-the-cookbook">Learn more from the Cookbook</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="testing.html"
                        title="previous chapter">Testing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="forms.html"
                        title="next chapter">Forms</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/validation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="forms.html" title="Forms"
             >next</a> |</li>
        <li class="right" >
          <a href="testing.html" title="Testing"
             >previous</a> |</li>
        <li><a href="../index.html">Symfony2Docs v1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Book</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Symfony Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>