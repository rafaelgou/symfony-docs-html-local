<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Translations &mdash; Symfony2 Framework Documentation  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Symfony2 Framework Documentation  documentation" href="../index.html" />
    <link rel="up" title="The Book" href="index.html" />
    <link rel="next" title="Service Container" href="service_container.html" />
    <link rel="prev" title="HTTP Cache" href="http_cache.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="service_container.html" title="Service Container"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="http_cache.html" title="HTTP Cache"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Symfony2 Framework Documentation  documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">The Book</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="translations">
<span id="index-0"></span><h1>Translations<a class="headerlink" href="#translations" title="Permalink to this headline">¶</a></h1>
<p>The term &#8220;internationalization&#8221; (often abbreviated <a class="reference external" href="http://en.wikipedia.org/wiki/Internationalization_and_localization">i18n</a>) refers to the
process of abstracting strings and other locale-specific pieces out of your
application into a layer where they can be translated and converted based
on the user&#8217;s locale (i.e. language and country). For text, this means
wrapping each with a function capable of translating the text (or &#8220;message&#8221;)
into the language of the user:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// text will *always* print out in English</span>
<span class="k">echo</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">;</span>

<span class="c1">// text can be translated into the end-user&#39;s language or</span>
<span class="c1">// default to English</span>
<span class="k">echo</span> <span class="nv">$translator</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The term <em>locale</em> refers roughly to the user&#8217;s language and country. It
can be any string that your application uses to manage translations and
other format differences (e.g. currency format). The <a class="reference external" href="http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639-1</a>
<em>language</em> code, an underscore (<tt class="docutils literal"><span class="pre">_</span></tt>), then the <a class="reference external" href="http://en.wikipedia.org/wiki/ISO_3166-1#Current_codes">ISO 3166-1 alpha-2</a>
<em>country</em> code (e.g. <tt class="docutils literal"><span class="pre">fr_FR</span></tt> for French/France) is recommended.</p>
</div>
<p>In this chapter, you&#8217;ll learn how to use the Translation component in the
Symfony2 framework. You can read the
<a class="reference internal" href="../components/translation/usage.html"><em>Translation component documentation</em></a>
to learn even more. Overall, the process has several steps:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#book-translation-configuration"><em>Enable and configure</em></a> Symfony&#8217;s
translation service;</li>
<li>Abstract strings (i.e. &#8220;messages&#8221;) by wrapping them in calls to the
<tt class="docutils literal"><span class="pre">Translator</span></tt> (&#8220;<a class="reference internal" href="#book-translation-basic"><em>Basic Translation</em></a>&#8221;);</li>
<li><a class="reference internal" href="#book-translation-resources"><em>Create translation resources/files</em></a>
for each supported locale that translate each message in the application;</li>
<li>Determine, <a class="reference internal" href="#book-translation-user-locale"><em>set and manage the user&#8217;s locale</em></a>
for the request and optionally
<a class="reference internal" href="../cookbook/session/locale_sticky_session.html"><em>on the user&#8217;s entire session</em></a>.</li>
</ol>
<div class="section" id="configuration">
<span id="book-translation-configuration"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Translations are handled by a <tt class="docutils literal"><span class="pre">translator</span></tt> <a class="reference internal" href="../glossary.html#term-service"><em class="xref std std-term">service</em></a> that uses the
user&#8217;s locale to lookup and return translated messages. Before using it,
enable the <tt class="docutils literal"><span class="pre">translator</span></tt> in your configuration:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">translator</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">fallback</span><span class="p-Indicator">:</span> <span class="nv">en</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;container</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/services&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xmlns:framework=</span><span class="s">&quot;http://symfony.com/schema/dic/symfony&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd</span>
<span class="s">                        http://symfony.com/schema/dic/symfony http://symfony.com/schema/dic/symfony/symfony-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;framework:config&gt;</span>
        <span class="nt">&lt;framework:translator</span> <span class="na">fallback=</span><span class="s">&quot;en&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:config&gt;</span>
<span class="nt">&lt;/container&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;translator&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;fallback&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en&#39;</span><span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>See <a class="reference internal" href="#book-translation-fallback"><em>Fallback Translation Locales</em></a> for details on the <tt class="docutils literal"><span class="pre">fallback</span></tt> key
and what Symfony does when it doesn&#8217;t find a translation.</p>
<p>The locale used in translations is the one stored on the request. This is
typically set via a <tt class="docutils literal"><span class="pre">_locale</span></tt> attribute on your routes (see <a class="reference internal" href="#book-translation-locale-url"><em>The Locale and the URL</em></a>).</p>
</div>
<div class="section" id="basic-translation">
<span id="book-translation-basic"></span><h2>Basic Translation<a class="headerlink" href="#basic-translation" title="Permalink to this headline">¶</a></h2>
<p>Translation of text is done through the  <tt class="docutils literal"><span class="pre">translator</span></tt> service
(<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Translation/Translator.html" title="Symfony\Component\Translation\Translator"><span class="pre">Translator</span></a></tt>). To translate a block
of text (called a <em>message</em>), use the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Translation/Translator.html#method_trans" title="Symfony\Component\Translation\Translator::trans()"><span class="pre">trans()</span></a></tt> method. Suppose,
for example, that you&#8217;re translating a simple message from inside a controller:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$translated</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;translator&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Symfony2 is great&#39;</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$translated</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="book-translation-resources">When this code is executed, Symfony2 will attempt to translate the message
&#8220;Symfony2 is great&#8221; based on the <tt class="docutils literal"><span class="pre">locale</span></tt> of the user. For this to work,
you need to tell Symfony2 how to translate the message via a &#8220;translation
resource&#8221;, which is usually a file that contains a collection of translations
for a given locale. This &#8220;dictionary&#8221; of translations can be created in several
different formats, XLIFF being the recommended format:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- messages.fr.xliff --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;xliff</span> <span class="na">version=</span><span class="s">&quot;1.2&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;urn:oasis:names:tc:xliff:document:1.2&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;file</span> <span class="na">source-language=</span><span class="s">&quot;en&quot;</span> <span class="na">datatype=</span><span class="s">&quot;plaintext&quot;</span> <span class="na">original=</span><span class="s">&quot;file.ext&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;trans-unit</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;source&gt;</span>Symfony2 is great<span class="nt">&lt;/source&gt;</span>
                <span class="nt">&lt;target&gt;</span>J&#39;aime Symfony2<span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;/trans-unit&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/file&gt;</span>
<span class="nt">&lt;/xliff&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// messages.fr.php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Symfony2 is great&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;J\&#39;aime Symfony2&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># messages.fr.yml</span>
<span class="l-Scalar-Plain">Symfony2 is great</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">J&#39;aime Symfony2</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>For information on where these files should be located, see
<a class="reference internal" href="#book-translation-resource-locations"><em>Translation Resource/File Names and Locations</em></a>.</p>
<p>Now, if the language of the user&#8217;s locale is French (e.g. <tt class="docutils literal"><span class="pre">fr_FR</span></tt> or <tt class="docutils literal"><span class="pre">fr_BE</span></tt>),
the message will be translated into <tt class="docutils literal"><span class="pre">J'aime</span> <span class="pre">Symfony2</span></tt>. You can also translate
the message inside your <a class="reference internal" href="#book-translation-tags"><em>templates</em></a>.</p>
<div class="section" id="the-translation-process">
<h3>The Translation Process<a class="headerlink" href="#the-translation-process" title="Permalink to this headline">¶</a></h3>
<p>To actually translate the message, Symfony2 uses a simple process:</p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">locale</span></tt> of the current user, which is stored on the request is determined;</li>
<li>A catalog (e.g. big collection) of translated messages is loaded from translation
resources defined for the <tt class="docutils literal"><span class="pre">locale</span></tt> (e.g. <tt class="docutils literal"><span class="pre">fr_FR</span></tt>). Messages from the
<a class="reference internal" href="#book-translation-fallback"><em>fallback locale</em></a> are also loaded and
added to the catalog if they don&#8217;t already exist. The end result is a large
&#8220;dictionary&#8221; of translations.</li>
<li>If the message is located in the catalog, the translation is returned. If
not, the translator returns the original message.</li>
</ul>
<p>When using the <tt class="docutils literal"><span class="pre">trans()</span></tt> method, Symfony2 looks for the exact string inside
the appropriate message catalog and returns it (if it exists).</p>
</div>
</div>
<div class="section" id="message-placeholders">
<h2>Message Placeholders<a class="headerlink" href="#message-placeholders" title="Permalink to this headline">¶</a></h2>
<p>Sometimes, a message containing a variable needs to be translated:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$translated</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;translator&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="p">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$translated</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>However, creating a translation for this string is impossible since the translator
will try to look up the exact message, including the variable portions
(e.g. <em>&#8220;Hello Ryan&#8221;</em> or <em>&#8220;Hello Fabien&#8221;</em>).</p>
<p>For details on how to handle this situation, see <a class="reference internal" href="../components/translation/usage.html#component-translation-placeholders"><em>Message Placeholders</em></a>
in the components documentation. For how to do this in templates, see <a class="reference internal" href="#book-translation-tags"><em>Twig Templates</em></a>.</p>
</div>
<div class="section" id="pluralization">
<h2>Pluralization<a class="headerlink" href="#pluralization" title="Permalink to this headline">¶</a></h2>
<p>Another complication is when you have translations that may or may not be
plural, based on some variable:</p>
<div class="highlight-text"><div class="highlight"><pre>There is one apple.
There are 5 apples.
</pre></div>
</div>
<p>To handle this, use the <tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Translation/Translator.html#method_transChoice" title="Symfony\Component\Translation\Translator::transChoice()"><span class="pre">transChoice()</span></a></tt>
method or the <tt class="docutils literal"><span class="pre">transchoice</span></tt> tag/filter in your <a class="reference internal" href="#book-translation-tags"><em>template</em></a>.</p>
<p>For much more information, see <a class="reference internal" href="../components/translation/usage.html#component-translation-pluralization"><em>Pluralization</em></a>
in the Translation component documentation.</p>
</div>
<div class="section" id="translations-in-templates">
<h2>Translations in Templates<a class="headerlink" href="#translations-in-templates" title="Permalink to this headline">¶</a></h2>
<p>Most of the time, translation occurs in templates. Symfony2 provides native
support for both Twig and PHP templates.</p>
<div class="section" id="twig-templates">
<span id="book-translation-tags"></span><h3>Twig Templates<a class="headerlink" href="#twig-templates" title="Permalink to this headline">¶</a></h3>
<p>Symfony2 provides specialized Twig tags (<tt class="docutils literal"><span class="pre">trans</span></tt> and <tt class="docutils literal"><span class="pre">transchoice</span></tt>) to
help with message translation of <em>static blocks of text</em>:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span><span class="x">Hello %name%</span><span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">transchoice</span> <span class="nv">count</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    {0} There are no apples|{1} There is one apple|]1,Inf] There are %count% apples</span>
<span class="cp">{%</span> <span class="k">endtranschoice</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">transchoice</span></tt> tag automatically gets the <tt class="docutils literal"><span class="pre">%count%</span></tt> variable from
the current context and passes it to the translator. This mechanism only
works when you use a placeholder following the <tt class="docutils literal"><span class="pre">%var%</span></tt> pattern.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">The <tt class="docutils literal"><span class="pre">%var%</span></tt> notation of placeholders is required when translating in
Twig templates using the tag.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you need to use the percent character (<tt class="docutils literal"><span class="pre">%</span></tt>) in a string, escape it by
doubling it: <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">trans</span> <span class="pre">%}Percent:</span> <span class="pre">%percent%%%{%</span> <span class="pre">endtrans</span> <span class="pre">%}</span></tt></p>
</div>
<p>You can also specify the message domain and pass some additional variables:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">trans</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;%name%&#39;</span><span class="o">:</span> <span class="s1">&#39;Fabien&#39;</span><span class="o">}</span> <span class="nv">from</span> <span class="s2">&quot;app&quot;</span> <span class="cp">%}</span><span class="x">Hello %name%</span><span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">trans</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;%name%&#39;</span><span class="o">:</span> <span class="s1">&#39;Fabien&#39;</span><span class="o">}</span> <span class="nv">from</span> <span class="s2">&quot;app&quot;</span> <span class="nv">into</span> <span class="s2">&quot;fr&quot;</span> <span class="cp">%}</span><span class="x">Hello %name%</span><span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">transchoice</span> <span class="nv">count</span> <span class="k">with</span> <span class="o">{</span><span class="s1">&#39;%name%&#39;</span><span class="o">:</span> <span class="s1">&#39;Fabien&#39;</span><span class="o">}</span> <span class="nv">from</span> <span class="s2">&quot;app&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    {0} %name%, there are no apples|{1} %name%, there is one apple|]1,Inf] %name%, there are %count% apples</span>
<span class="cp">{%</span> <span class="k">endtranschoice</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p id="book-translation-filters">The <tt class="docutils literal"><span class="pre">trans</span></tt> and <tt class="docutils literal"><span class="pre">transchoice</span></tt> filters can be used to translate <em>variable
texts</em> and complex expressions:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">message</span><span class="o">|</span><span class="nf">trans</span> <span class="cp">}}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">message</span><span class="o">|</span><span class="nf">transchoice</span><span class="o">(</span><span class="m">5</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">message</span><span class="o">|</span><span class="nf">trans</span><span class="o">({</span><span class="s1">&#39;%name%&#39;</span><span class="o">:</span> <span class="s1">&#39;Fabien&#39;</span><span class="o">},</span> <span class="s2">&quot;app&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">message</span><span class="o">|</span><span class="nf">transchoice</span><span class="o">(</span><span class="m">5</span><span class="o">,</span> <span class="o">{</span><span class="s1">&#39;%name%&#39;</span><span class="o">:</span> <span class="s1">&#39;Fabien&#39;</span><span class="o">},</span> <span class="s1">&#39;app&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>Using the translation tags or filters have the same effect, but with
one subtle difference: automatic output escaping is only applied to
translations using a filter. In other words, if you need to be sure
that your translated message is <em>not</em> output escaped, you must apply
the <tt class="docutils literal"><span class="pre">raw</span></tt> filter after the translation filter:</p>
<div class="last highlight-jinja"><div class="highlight"><pre><span class="c">{# text translated between tags is never escaped #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h3&gt;foo&lt;/h3&gt;</span>
<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">message</span> <span class="o">=</span> <span class="s1">&#39;&lt;h3&gt;foo&lt;/h3&gt;&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# strings and variables translated via a filter are escaped by default #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">message</span><span class="o">|</span><span class="nf">trans</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s1">&#39;&lt;h3&gt;bar&lt;/h3&gt;&#39;</span><span class="o">|</span><span class="nf">trans</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>You can set the translation domain for an entire Twig template with a single tag:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">trans_default_domain</span> <span class="s2">&quot;app&quot;</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p class="last">Note that this only influences the current template, not any &#8220;included&#8221;
template (in order to avoid side effects).</p>
</div>
</div>
<div class="section" id="php-templates">
<h3>PHP Templates<a class="headerlink" href="#php-templates" title="Permalink to this headline">¶</a></h3>
<p>The translator service is accessible in PHP templates through the
<tt class="docutils literal"><span class="pre">translator</span></tt> helper:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;translator&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Symfony2 is great&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;translator&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">transChoice</span><span class="p">(</span>
    <span class="s1">&#39;{0} There are no apples|{1} There is one apple|]1,Inf[ There are %count% apples&#39;</span><span class="p">,</span>
    <span class="mi">10</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;%count%&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">)</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="translation-resource-file-names-and-locations">
<span id="book-translation-resource-locations"></span><h2>Translation Resource/File Names and Locations<a class="headerlink" href="#translation-resource-file-names-and-locations" title="Permalink to this headline">¶</a></h2>
<p>Symfony2 looks for message files (i.e. translations) in the following locations:</p>
<ul class="simple">
<li>the <tt class="docutils literal"><span class="pre">app/Resources/translations</span></tt> directory;</li>
<li>the <tt class="docutils literal"><span class="pre">app/Resources/&lt;bundle</span> <span class="pre">name&gt;/translations</span></tt> directory;</li>
<li>the <tt class="docutils literal"><span class="pre">Resources/translations/</span></tt> directory inside of any bundle.</li>
</ul>
<p>The locations are listed here with the highest priority first. That is, you can
override the translation messages of a bundle in any of the top 2 directories.</p>
<p>The override mechanism works at a key level: only the overridden keys need
to be listed in a higher priority message file. When a key is not found
in a message file, the translator will automatically fall back to the lower
priority message files.</p>
<p>The filename of the translation files is also important: each message file
must be named according to the following path: <tt class="docutils literal"><span class="pre">domain.locale.loader</span></tt>:</p>
<ul class="simple">
<li><strong>domain</strong>: An optional way to organize messages into groups (e.g. <tt class="docutils literal"><span class="pre">admin</span></tt>,
<tt class="docutils literal"><span class="pre">navigation</span></tt> or the default <tt class="docutils literal"><span class="pre">messages</span></tt>) - see <a class="reference internal" href="../components/translation/introduction.html#using-message-domains"><em>Using Message Domains</em></a>;</li>
<li><strong>locale</strong>: The locale that the translations are for (e.g. <tt class="docutils literal"><span class="pre">en_GB</span></tt>, <tt class="docutils literal"><span class="pre">en</span></tt>, etc);</li>
<li><strong>loader</strong>: How Symfony2 should load and parse the file (e.g. <tt class="docutils literal"><span class="pre">xliff</span></tt>,
<tt class="docutils literal"><span class="pre">php</span></tt>, <tt class="docutils literal"><span class="pre">yml</span></tt>, etc).</li>
</ul>
<p>The loader can be the name of any registered loader. By default, Symfony
provides many loaders, including:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">xliff</span></tt>: XLIFF file;</li>
<li><tt class="docutils literal"><span class="pre">php</span></tt>: PHP file;</li>
<li><tt class="docutils literal"><span class="pre">yml</span></tt>: YAML file.</li>
</ul>
<p>The choice of which loader to use is entirely up to you and is a matter of
taste. For more options, see <a class="reference internal" href="../components/translation/introduction.html#component-translator-message-catalogs"><em>Loading Message Catalogs</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also store translations in a database, or any other storage by
providing a custom class implementing the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Translation/Loader/LoaderInterface.html" title="Symfony\Component\Translation\Loader\LoaderInterface"><span class="pre">LoaderInterface</span></a></tt> interface.
See the <a class="reference internal" href="../reference/dic_tags.html#dic-tags-translation-loader"><em>translation.loader</em></a> tag for more information.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>Each time you create a <em>new</em> translation resource (or install a bundle
that includes a translation resource), be sure to clear your cache so
that Symfony can discover the new translation resources:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console cache:clear
</pre></div>
</div>
</div>
</div>
<div class="section" id="fallback-translation-locales">
<span id="book-translation-fallback"></span><h2>Fallback Translation Locales<a class="headerlink" href="#fallback-translation-locales" title="Permalink to this headline">¶</a></h2>
<p>Imagine that the user&#8217;s locale is <tt class="docutils literal"><span class="pre">fr_FR</span></tt> and that you&#8217;re translating the
key <tt class="docutils literal"><span class="pre">Symfony2</span> <span class="pre">is</span> <span class="pre">great</span></tt>. To find the French translation, Symfony actually
checks translation resources for several different locales:</p>
<ol class="arabic simple">
<li>First, Symfony looks for the translation in a <tt class="docutils literal"><span class="pre">fr_FR</span></tt> translation resource
(e.g. <tt class="docutils literal"><span class="pre">messages.fr_FR.xliff</span></tt>);</li>
<li>If it wasn&#8217;t found, Symfony looks for the translation in a <tt class="docutils literal"><span class="pre">fr</span></tt> translation
resource (e.g. <tt class="docutils literal"><span class="pre">messages.fr.xliff</span></tt>);</li>
<li>If the translation still isn&#8217;t found, Symfony uses the <tt class="docutils literal"><span class="pre">fallback</span></tt> configuration
parameter, which defaults to <tt class="docutils literal"><span class="pre">en</span></tt> (see <a class="reference internal" href="#configuration">Configuration</a>).</li>
</ol>
</div>
<div class="section" id="handling-the-user-s-locale">
<span id="book-translation-user-locale"></span><h2>Handling the User&#8217;s Locale<a class="headerlink" href="#handling-the-user-s-locale" title="Permalink to this headline">¶</a></h2>
<p>The locale of the current user is stored in the request and is accessible
via the <tt class="docutils literal"><span class="pre">request</span></tt> object:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$locale</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getLocale</span><span class="p">();</span>

    <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setLocale</span><span class="p">(</span><span class="s1">&#39;en_US&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Read <a class="reference internal" href="../cookbook/session/locale_sticky_session.html"><em>Making the Locale &#8220;Sticky&#8221; during a User&#8217;s Session</em></a> to learn, how to store
the user&#8217;s locale in the session.</p>
</div>
<p id="index-1">See the <a class="reference internal" href="#book-translation-locale-url"><em>The Locale and the URL</em></a> section below about setting the
locale via routing.</p>
<div class="section" id="the-locale-and-the-url">
<span id="book-translation-locale-url"></span><h3>The Locale and the URL<a class="headerlink" href="#the-locale-and-the-url" title="Permalink to this headline">¶</a></h3>
<p>Since you can store the locale of the user in the session, it may be tempting
to use the same URL to display a resource in many different languages based
on the user&#8217;s locale. For example, <tt class="docutils literal"><span class="pre">http://www.example.com/contact</span></tt> could
show content in English for one user and French for another user. Unfortunately,
this violates a fundamental rule of the Web: that a particular URL returns
the same resource regardless of the user. To further muddy the problem, which
version of the content would be indexed by search engines?</p>
<p>A better policy is to include the locale in the URL. This is fully-supported
by the routing system using the special <tt class="docutils literal"><span class="pre">_locale</span></tt> parameter:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">contact</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span>     <span class="l-Scalar-Plain">/{_locale}/contact</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeDemoBundle</span><span class="p-Indicator">:</span><span class="nv">Contact</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">_locale</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">en|fr|de</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing</span>
<span class="s">        http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;contact&quot;</span> <span class="na">path=</span><span class="s">&quot;/{_locale}/contact&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeDemoBundle:Contact:index<span class="nt">&lt;/default&gt;</span>
        <span class="nt">&lt;requirement</span> <span class="na">key=</span><span class="s">&quot;_locale&quot;</span><span class="nt">&gt;</span>en|fr|de<span class="nt">&lt;/requirement&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;contact&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span>
    <span class="s1">&#39;/{_locale}/contact&#39;</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeDemoBundle:Contact:index&#39;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;_locale&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;en|fr|de&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>When using the special <tt class="docutils literal"><span class="pre">_locale</span></tt> parameter in a route, the matched locale
will <em>automatically be set on the Request</em> and can be retrieved via the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html#method_getLocale" title="Symfony\Component\HttpFoundation\Request::getLocale()"><span class="pre">getLocale()</span></a></tt> method.
In other words, if a user
visits the URI <tt class="docutils literal"><span class="pre">/fr/contact</span></tt>, the locale <tt class="docutils literal"><span class="pre">fr</span></tt> will automatically be set
as the locale for the current request.</p>
<p>You can now use the locale to create routes to other translated pages
in your application.</p>
</div>
<div class="section" id="setting-a-default-locale">
<h3>Setting a default Locale<a class="headerlink" href="#setting-a-default-locale" title="Permalink to this headline">¶</a></h3>
<p>What if the user&#8217;s locale hasn&#8217;t been determined? You can guarantee that a
locale is set on each user&#8217;s request by defining a <tt class="docutils literal"><span class="pre">default_locale</span></tt> for
the framework:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">default_locale</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">en</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:default-locale&gt;</span>en<span class="nt">&lt;/framework:default-locale&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;default_locale&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="translating-constraint-messages">
<span id="book-translation-constraint-messages"></span><h2>Translating Constraint Messages<a class="headerlink" href="#translating-constraint-messages" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re using validation constraints with the form framework, then translating
the error messages is easy: simply create a translation resource for the
<tt class="docutils literal"><span class="pre">validators</span></tt> <a class="reference internal" href="../components/translation/introduction.html#using-message-domains"><em>domain</em></a>.</p>
<p>To start, suppose you&#8217;ve created a plain-old-PHP object that you need to
use somewhere in your application:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add constraints though any of the supported methods. Set the message option to the
translation source text. For example, to guarantee that the <tt class="docutils literal"><span class="pre">$name</span></tt> property is
not empty, add the following:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">message</span><span class="p-Indicator">:</span> <span class="s">&quot;author.name.not_blank&quot;</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\NotBlank(message = &quot;author.name.not_blank&quot;)</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;constraint-mapping</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/dic/constraint-mapping http://symfony.com/schema/dic/constraint-mapping/constraint-mapping-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;message&quot;</span><span class="nt">&gt;</span>author.name.not_blank<span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;/constraint&gt;</span>
        <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/constraint-mapping&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>

<span class="c1">// ...</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints\NotBlank</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">NotBlank</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;author.name.not_blank&#39;</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Create a translation file under the <tt class="docutils literal"><span class="pre">validators</span></tt> catalog for the constraint
messages, typically in the <tt class="docutils literal"><span class="pre">Resources/translations/</span></tt> directory of the
bundle.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- validators.en.xliff --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;xliff</span> <span class="na">version=</span><span class="s">&quot;1.2&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;urn:oasis:names:tc:xliff:document:1.2&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;file</span> <span class="na">source-language=</span><span class="s">&quot;en&quot;</span> <span class="na">datatype=</span><span class="s">&quot;plaintext&quot;</span> <span class="na">original=</span><span class="s">&quot;file.ext&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;trans-unit</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;source&gt;</span>author.name.not_blank<span class="nt">&lt;/source&gt;</span>
                <span class="nt">&lt;target&gt;</span>Please enter an author name.<span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;/trans-unit&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/file&gt;</span>
<span class="nt">&lt;/xliff&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// validators.en.php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;author.name.not_blank&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Please enter an author name.&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># validators.en.yml</span>
<span class="l-Scalar-Plain">author.name.not_blank</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Please enter an author name.</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="translating-database-content">
<h2>Translating Database Content<a class="headerlink" href="#translating-database-content" title="Permalink to this headline">¶</a></h2>
<p>The translation of database content should be handled by Doctrine through
the <a class="reference external" href="https://github.com/l3pp4rd/DoctrineExtensions">Translatable Extension</a> or the <a class="reference external" href="https://github.com/KnpLabs/DoctrineBehaviors">Translatable Behavior</a> (PHP 5.4+).
For more information, see the documentation for these libraries.</p>
</div>
<div class="section" id="debugging-translations">
<h2>Debugging Translations<a class="headerlink" href="#debugging-translations" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.5: </span>The <tt class="docutils literal"><span class="pre">translation:debug</span></tt> command was introduced in Symfony 2.5.</p>
</div>
<p>When maintaining a bundle, you may use or remove the usage of a translation
message without updating all message catalogues. The <tt class="docutils literal"><span class="pre">translation:debug</span></tt>
command helps you to find these missing or unused translation messages for a
given locale. It shows you a table with the result when translating the
message in the given locale and the result when the fallback would be used.
On top of that, it also shows you when the translation is the same as the
fallback translation (this could indicate that the message was not correctly
translated).</p>
<p>Thanks to the messages extractors, the command will detect the translation
tag or filter usages in Twig templates:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span><span class="x">Symfony2 is great</span><span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{{</span> <span class="s1">&#39;Symfony2 is great&#39;</span><span class="o">|</span><span class="nf">trans</span> <span class="cp">}}</span><span class="x"></span>

<span class="cp">{{</span> <span class="s1">&#39;Symfony2 is great&#39;</span><span class="o">|</span><span class="nf">transchoice</span><span class="o">(</span><span class="m">1</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">transchoice</span> <span class="m">1</span> <span class="cp">%}</span><span class="x">Symfony2 is great</span><span class="cp">{%</span> <span class="k">endtranschoice</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>It will also detect the following translator usages in PHP templates:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;translator&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s2">&quot;Symfony2 is great&quot;</span><span class="p">);</span>

<span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;translator&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">trans</span><span class="p">(</span><span class="s1">&#39;Symfony2 is great&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>The extractors are not able to inspect the messages translated outside templates which means
that translator usages in form labels or inside your controllers won&#8217;t be detected.
Dynamic translations involving variables or expressions are not detected in templates,
which means this example won&#8217;t be analyzed:</p>
<div class="last highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">message</span> <span class="o">=</span> <span class="s1">&#39;Symfony2 is great&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">message</span><span class="o">|</span><span class="nf">trans</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
<p>Suppose your application&#8217;s default_locale is <tt class="docutils literal"><span class="pre">fr</span></tt> and you have configured <tt class="docutils literal"><span class="pre">en</span></tt> as the fallback locale
(see <a class="reference internal" href="#book-translation-configuration"><em>Configuration</em></a> and <a class="reference internal" href="#book-translation-fallback"><em>Fallback Translation Locales</em></a> for how to configure these).
And suppose you&#8217;ve already setup some translations for the <tt class="docutils literal"><span class="pre">fr</span></tt> locale inside an AcmeDemoBundle:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/AcmeDemoBundle/Resources/translations/messages.fr.xliff --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;xliff</span> <span class="na">version=</span><span class="s">&quot;1.2&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;urn:oasis:names:tc:xliff:document:1.2&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;file</span> <span class="na">source-language=</span><span class="s">&quot;en&quot;</span> <span class="na">datatype=</span><span class="s">&quot;plaintext&quot;</span> <span class="na">original=</span><span class="s">&quot;file.ext&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;trans-unit</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;source&gt;</span>Symfony2 is great<span class="nt">&lt;/source&gt;</span>
                <span class="nt">&lt;target&gt;</span>J&#39;aime Symfony2<span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;/trans-unit&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/file&gt;</span>
<span class="nt">&lt;/xliff&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/AcmeDemoBundle/Resources/translations/messages.fr.php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Symfony2 is great&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;J\&#39;aime Symfony2&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/AcmeDemoBundle/Resources/translations/messages.fr.yml</span>
<span class="l-Scalar-Plain">Symfony2 is great</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">J&#39;aime Symfony2</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>and for the <tt class="docutils literal"><span class="pre">en</span></tt> locale:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/AcmeDemoBundle/Resources/translations/messages.en.xliff --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;xliff</span> <span class="na">version=</span><span class="s">&quot;1.2&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;urn:oasis:names:tc:xliff:document:1.2&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;file</span> <span class="na">source-language=</span><span class="s">&quot;en&quot;</span> <span class="na">datatype=</span><span class="s">&quot;plaintext&quot;</span> <span class="na">original=</span><span class="s">&quot;file.ext&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;body&gt;</span>
            <span class="nt">&lt;trans-unit</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;source&gt;</span>Symfony2 is great<span class="nt">&lt;/source&gt;</span>
                <span class="nt">&lt;target&gt;</span>Symfony2 is great<span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;/trans-unit&gt;</span>
        <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/file&gt;</span>
<span class="nt">&lt;/xliff&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/AcmeDemoBundle/Resources/translations/messages.en.php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;Symfony2 is great&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Symfony2 is great&#39;</span><span class="p">,</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/AcmeDemoBundle/Resources/translations/messages.en.yml</span>
<span class="l-Scalar-Plain">Symfony2 is great</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Symfony2 is great</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>To inspect all messages in the <tt class="docutils literal"><span class="pre">fr</span></tt> locale for the AcmeDemoBundle, run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console translation:debug fr AcmeDemoBundle
</pre></div>
</div>
<p>You will get this output:</p>
<img alt="../_images/debug_1.png" class="align-center" src="../_images/debug_1.png" />
<p>It indicates that the message <tt class="docutils literal"><span class="pre">Symfony2</span> <span class="pre">is</span> <span class="pre">great</span></tt> is unused because it is translated,
but you haven&#8217;t used it anywhere yet.</p>
<p>Now, if you translate the message in one of your templates, you will get this output:</p>
<img alt="../_images/debug_2.png" class="align-center" src="../_images/debug_2.png" />
<p>The state is empty which means the message is translated in the <tt class="docutils literal"><span class="pre">fr</span></tt> locale and used in one or more templates.</p>
<p>If you delete the message <tt class="docutils literal"><span class="pre">Symfony2</span> <span class="pre">is</span> <span class="pre">great</span></tt> from your translation file for the <tt class="docutils literal"><span class="pre">fr</span></tt> locale
and run the command, you will get:</p>
<img alt="../_images/debug_3.png" class="align-center" src="../_images/debug_3.png" />
<p>The state indicates the message is missing because it is not translated in the <tt class="docutils literal"><span class="pre">fr</span></tt> locale
but it is still used in the template.
Moreover, the message in the <tt class="docutils literal"><span class="pre">fr</span></tt> locale equals to the message in the <tt class="docutils literal"><span class="pre">en</span></tt> locale.
This is a special case because the untranslated message id equals its translation in the <tt class="docutils literal"><span class="pre">en</span></tt> locale.</p>
<p>If you copy the content of the translation file in the <tt class="docutils literal"><span class="pre">en</span></tt> locale, to the translation file
in the <tt class="docutils literal"><span class="pre">fr</span></tt> locale and run the command, you will get:</p>
<img alt="../_images/debug_4.png" class="align-center" src="../_images/debug_4.png" />
<p>You can see that the translations of the message are identical in the <tt class="docutils literal"><span class="pre">fr</span></tt> and <tt class="docutils literal"><span class="pre">en</span></tt> locales
which means this message was probably copied from French to English and maybe you forgot to translate it.</p>
<p>By default all domains are inspected, but it is possible to specify a single domain:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console translation:debug en AcmeDemoBundle --domain<span class="o">=</span>messages
</pre></div>
</div>
<p>When bundles have a lot of messages, it is useful to display only the unused
or only the missing messages, by using the <tt class="docutils literal"><span class="pre">--only-unused</span></tt> or <tt class="docutils literal"><span class="pre">--only-missing</span></tt> switches:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console translation:debug en AcmeDemoBundle --only-unused
<span class="nv">$ </span>php app/console translation:debug en AcmeDemoBundle --only-missing
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>With the Symfony2 Translation component, creating an internationalized application
no longer needs to be a painful process and boils down to just a few basic
steps:</p>
<ul class="simple">
<li>Abstract messages in your application by wrapping each in either the
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Translation/Translator.html#method_trans" title="Symfony\Component\Translation\Translator::trans()"><span class="pre">trans()</span></a></tt> or
<tt class="docutils literal"><a class="reference external" href="http://api.symfony.com/master/Symfony/Component/Translation/Translator.html#method_transChoice" title="Symfony\Component\Translation\Translator::transChoice()"><span class="pre">transChoice()</span></a></tt> methods
(learn about this in <a class="reference internal" href="../components/translation/usage.html"><em>Using the Translator</em></a>);</li>
<li>Translate each message into multiple locales by creating translation message
files. Symfony2 discovers and processes each file because its name follows
a specific convention;</li>
<li>Manage the user&#8217;s locale, which is stored on the request, but can also
be set on the user&#8217;s session.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Translations</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#basic-translation">Basic Translation</a><ul>
<li><a class="reference internal" href="#the-translation-process">The Translation Process</a></li>
</ul>
</li>
<li><a class="reference internal" href="#message-placeholders">Message Placeholders</a></li>
<li><a class="reference internal" href="#pluralization">Pluralization</a></li>
<li><a class="reference internal" href="#translations-in-templates">Translations in Templates</a><ul>
<li><a class="reference internal" href="#twig-templates">Twig Templates</a></li>
<li><a class="reference internal" href="#php-templates">PHP Templates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#translation-resource-file-names-and-locations">Translation Resource/File Names and Locations</a></li>
<li><a class="reference internal" href="#fallback-translation-locales">Fallback Translation Locales</a></li>
<li><a class="reference internal" href="#handling-the-user-s-locale">Handling the User&#8217;s Locale</a><ul>
<li><a class="reference internal" href="#the-locale-and-the-url">The Locale and the URL</a></li>
<li><a class="reference internal" href="#setting-a-default-locale">Setting a default Locale</a></li>
</ul>
</li>
<li><a class="reference internal" href="#translating-constraint-messages">Translating Constraint Messages</a></li>
<li><a class="reference internal" href="#translating-database-content">Translating Database Content</a></li>
<li><a class="reference internal" href="#debugging-translations">Debugging Translations</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="http_cache.html"
                        title="previous chapter">HTTP Cache</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="service_container.html"
                        title="next chapter">Service Container</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/book/translation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="service_container.html" title="Service Container"
             >next</a> |</li>
        <li class="right" >
          <a href="http_cache.html" title="HTTP Cache"
             >previous</a> |</li>
        <li><a href="../index.html">Symfony2 Framework Documentation  documentation</a> &raquo;</li>
          <li><a href="index.html" >The Book</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>